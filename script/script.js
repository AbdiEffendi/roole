function Toc(){var e=document.getElementById("toc"),t=e.previousElementSibling;this.element=e,this.toggerElement=t,this.clickToToggle()}window.CodeMirror=function(){"use strict";function e(r,n){if(!(this instanceof e))return new e(r,n);this.options=n=n||{};for(var i in zi)!n.hasOwnProperty(i)&&zi.hasOwnProperty(i)&&(n[i]=zi[i]);f(n);var o="string"==typeof n.value?0:n.value.first,l=this.display=t(r,o);l.wrapper.CodeMirror=this,u(this),n.autofocus&&!di&&it(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new Tn},this.nextOpId=0,s(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var a=n.value;"string"==typeof a&&(a=new Vi(n.value,n.mode)),Z(this,Yr)(this,a),ei&&setTimeout(On(nt,this,!0),20),lt(this);var c;try{c=document.activeElement==l.input}catch(h){}c||n.autofocus&&!di?setTimeout(On(Ct,this),20):Lt(this),Z(this,function(){for(var e in Ei)Ei.propertyIsEnumerable(e)&&Ei[e](this,n[e],Ni);for(var t=0;Hi.length>t;++t)Hi[t](this)})()}function t(e,t){var r={},n=r.input=Fn("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none;");ni?n.style.width="1000px":n.setAttribute("wrap","off"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),r.inputDiv=Fn("div",[n],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),r.scrollbarH=Fn("div",[Fn("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),r.scrollbarV=Fn("div",[Fn("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),r.scrollbarFiller=Fn("div",null,"CodeMirror-scrollbar-filler"),r.lineDiv=Fn("div"),r.selectionDiv=Fn("div",null,null,"position: relative; z-index: 1"),r.cursor=Fn("div"," ","CodeMirror-cursor"),r.otherCursor=Fn("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"),r.measure=Fn("div",null,"CodeMirror-measure"),r.lineSpace=Fn("div",[r.measure,r.selectionDiv,r.lineDiv,r.cursor,r.otherCursor],null,"position: relative; outline: none"),r.mover=Fn("div",[Fn("div",[r.lineSpace],"CodeMirror-lines")],null,"position: relative"),r.sizer=Fn("div",[r.mover],"CodeMirror-sizer"),r.heightForcer=Fn("div"," ",null,"position: absolute; height: "+Yi+"px"),r.gutters=Fn("div",null,"CodeMirror-gutters"),r.lineGutter=null;var i=Fn("div",[r.sizer,r.heightForcer,r.gutters],null,"position: relative; min-height: 100%");return r.scroller=Fn("div",[i],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=Fn("div",[r.inputDiv,r.scrollbarH,r.scrollbarV,r.scrollbarFiller,r.scroller],"CodeMirror"),ti&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0),e.appendChild?e.appendChild(r.wrapper):e(r.wrapper),fi&&(n.style.width="0px"),ni||(r.scroller.draggable=!0),ai?(r.inputDiv.style.height="1px",r.inputDiv.style.position="absolute"):ti&&(r.scrollbarH.style.minWidth=r.scrollbarV.style.minWidth="18px"),r.viewOffset=r.lastSizeC=0,r.showingFrom=r.showingTo=t,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.prevInput="",r.alignWidgets=!1,r.pollingFast=!1,r.poll=new Tn,r.draggingText=!1,r.cachedCharWidth=r.cachedTextHeight=null,r.measureLineCache=[],r.measureLineCachePos=0,r.inaccurateSelection=!1,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r}function r(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),t.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),t.doc.frontier=t.doc.first,D(t,100),t.state.modeGen++,t.curOp&&Q(t)}function n(e){e.options.lineWrapping?(e.display.wrapper.className+=" CodeMirror-wrap",e.display.sizer.style.minWidth=""):(e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-wrap",""),h(e)),o(e),Q(e),P(e),setTimeout(function(){d(e.display,e.doc.height)},100)}function i(e){var t=Y(e.display),r=e.options.lineWrapping,n=r&&Math.max(5,e.display.scroller.clientWidth/_(e.display)-3);return function(e){return Cr(e)?0:r?(Math.ceil(e.text.length/n)||1)*t:t}}function o(e){var t=e.doc,r=i(e);t.iter(function(e){var t=r(e);t!=e.height&&Zr(e,t)})}function l(e){var t=Ii[e.options.keyMap].style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(t?" cm-keymap-"+t:"")}function s(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),P(e)}function a(e){u(e),Q(e)}function u(e){var t=e.display.gutters,r=e.options.gutters;Rn(t);for(var n=0;r.length>n;++n){var i=r[n],o=t.appendChild(Fn("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=n?"":"none"}function c(e,t){if(0==t.height)return 0;for(var r,n=t.text.length,i=t;r=br(i);){var o=r.find();i=_r(e,o.from.line),n+=o.from.ch-o.to.ch}for(i=t;r=kr(i);){var o=r.find();n-=i.text.length-o.from.ch,i=_r(e,o.to.line),n+=i.text.length-o.to.ch}return n}function h(e){var t=e.display,r=e.doc;t.maxLine=_r(r,r.first),t.maxLineLength=c(r,t.maxLine),t.maxLineChanged=!0,r.iter(function(e){var n=c(r,e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}function f(e){for(var t=!1,r=0;e.gutters.length>r;++r)"CodeMirror-linenumbers"==e.gutters[r]&&(e.lineNumbers?t=!0:e.gutters.splice(r--,1));!t&&e.lineNumbers&&e.gutters.push("CodeMirror-linenumbers")}function d(e,t){var r=t+2*O(e);e.sizer.style.minHeight=e.heightForcer.style.top=r+"px";var n=Math.max(r,e.scroller.scrollHeight),i=e.scroller.scrollWidth>e.scroller.clientWidth,o=n>e.scroller.clientHeight;o?(e.scrollbarV.style.display="block",e.scrollbarV.style.bottom=i?Kn(e.measure)+"px":"0",e.scrollbarV.firstChild.style.height=n-e.scroller.clientHeight+e.scrollbarV.clientHeight+"px"):e.scrollbarV.style.display="",i?(e.scrollbarH.style.display="block",e.scrollbarH.style.right=o?Kn(e.measure)+"px":"0",e.scrollbarH.firstChild.style.width=e.scroller.scrollWidth-e.scroller.clientWidth+e.scrollbarH.clientWidth+"px"):e.scrollbarH.style.display="",i&&o?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=e.scrollbarFiller.style.width=Kn(e.measure)+"px"):e.scrollbarFiller.style.display="",ui&&0===Kn(e.measure)&&(e.scrollbarV.style.minWidth=e.scrollbarH.style.minHeight=ci?"18px":"12px")}function p(e,t,r){var n=e.scroller.scrollTop,i=e.wrapper.clientHeight;"number"==typeof r?n=r:r&&(n=r.top,i=r.bottom-r.top),n=Math.floor(n-O(e));var o=Math.ceil(n+i);return{from:Qr(t,n),to:Qr(t,o)}}function m(e){var t=e.display;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=y(t)-t.scroller.scrollLeft+e.doc.scrollLeft,n=t.gutters.offsetWidth,i=r+"px",o=t.lineDiv.firstChild;o;o=o.nextSibling)if(o.alignable)for(var l=0,s=o.alignable;s.length>l;++l)s[l].style.left=i;e.options.fixedGutter&&(t.gutters.style.left=r+n+"px")}}function v(e){if(!e.options.lineNumbers)return!1;var t=e.doc,r=g(e.options,t.first+t.size-1),n=e.display;if(r.length!=n.lineNumChars){var i=n.measure.appendChild(Fn("div",[Fn("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,l=i.offsetWidth-o;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-l),n.lineNumWidth=n.lineNumInnerWidth+l,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",!0}return!1}function g(e,t){return e.lineNumberFormatter(t+e.firstLineNumber)+""}function y(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function b(e,t,r){var n=e.display.showingFrom,i=e.display.showingTo,o=k(e,t,r);return o&&(wn(e,"update",e),(e.display.showingFrom!=n||e.display.showingTo!=i)&&wn(e,"viewportChange",e,e.display.showingFrom,e.display.showingTo)),M(e),d(e.display,e.doc.height),o}function k(e,t,r){var n=e.display,i=e.doc;if(!n.wrapper.clientWidth)return n.showingFrom=n.showingTo=i.first,n.viewOffset=0,void 0;var o=p(n,i,r);if(!(0==t.length&&o.from>n.showingFrom&&o.to<n.showingTo)){v(e)&&(t=[{from:i.first,to:i.first+i.size}]);var l=n.sizer.style.marginLeft=n.gutters.offsetWidth+"px";if(n.scrollbarH.style.left=e.options.fixedGutter?l:"0",Ci)for(var s=0;t.length>s;++s)for(var a,u=t[s];a=br(_r(i,u.from));){var c=a.find().from.line;u.diff&&(u.diff-=u.from-c),u.from=c}var h=1/0;if(e.options.lineNumbers)for(var s=0;t.length>s;++s)if(t[s].diff){h=t[s].from;break}var f=i.first+i.size,c=Math.max(o.from-e.options.viewportMargin,i.first),d=Math.min(f,o.to+e.options.viewportMargin);if(c>n.showingFrom&&20>c-n.showingFrom&&(c=Math.max(i.first,n.showingFrom)),n.showingTo>d&&20>n.showingTo-d&&(d=Math.min(f,n.showingTo)),Ci)for(c=qr(xr(i,_r(i,c)));f>d&&Cr(_r(i,d));)++d;for(var m=C([{from:n.showingFrom,to:n.showingTo}],t),g=0,s=0;m.length>s;++s){var y=m[s];c>y.from&&(y.from=c),y.to>d&&(y.to=d),y.from>=y.to?m.splice(s--,1):g+=y.to-y.from}if(g==d-c&&c==n.showingFrom&&d==n.showingTo)return x(e),void 0;m.sort(function(e,t){return e.from-t.from});var b=document.activeElement;.7*(d-c)>g&&(n.lineDiv.style.display="none"),w(e,c,d,m,h),n.lineDiv.style.display="",document.activeElement!=b&&b.offsetHeight&&b.focus();var L=c!=n.showingFrom||d!=n.showingTo||n.lastSizeC!=n.wrapper.clientHeight;L&&(n.lastSizeC=n.wrapper.clientHeight),n.showingFrom=c,n.showingTo=d,D(e,100);for(var S,T=n.lineDiv.offsetTop,M=n.lineDiv.firstChild;M;M=M.nextSibling)if(M.lineObj){if(ti){var E=M.offsetTop+M.offsetHeight;S=E-T,T=E}else{var z=M.getBoundingClientRect();S=z.bottom-z.top}var N=M.lineObj.height-S;if(2>S&&(S=Y(n)),N>.001||-.001>N){Zr(M.lineObj,S);var A=M.lineObj.widgets;if(A)for(var s=0;A.length>s;++s)A[s].height=A[s].node.offsetHeight}}return x(e),p(n,i,r).to>=d&&k(e,[],r),!0}}function x(e){var t=e.display.viewOffset=en(e,_r(e.doc,e.display.showingFrom));e.display.mover.style.top=t+"px"}function C(e,t){for(var r=0,n=t.length||0;n>r;++r){for(var i=t[r],o=[],l=i.diff||0,s=0,a=e.length;a>s;++s){var u=e[s];i.to<=u.from&&i.diff?o.push({from:u.from+l,to:u.to+l}):i.to<=u.from||i.from>=u.to?o.push(u):(i.from>u.from&&o.push({from:u.from,to:i.from}),i.to<u.to&&o.push({from:i.to+l,to:u.to+l}))}e=o}return e}function L(e){for(var t=e.display,r={},n={},i=t.gutters.firstChild,o=0;i;i=i.nextSibling,++o)r[e.options.gutters[o]]=i.offsetLeft,n[e.options.gutters[o]]=i.offsetWidth;return{fixedPos:y(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function w(e,t,r,n,i){function o(t){var r=t.nextSibling;return ni&&pi&&e.display.currentWheelTarget==t?(t.style.display="none",t.lineObj=null):t.parentNode.removeChild(t),r}var l=L(e),s=e.display,a=e.options.lineNumbers;n.length||ni&&e.display.currentWheelTarget||Rn(s.lineDiv);var u=s.lineDiv,c=u.firstChild,h=n.shift(),f=t;for(e.doc.iter(t,r,function(t){if(h&&h.to==f&&(h=n.shift()),Cr(t)){if(0!=t.height&&Zr(t,0),t.widgets&&c.previousSibling)for(var r=0;t.widgets.length>r;++r)if(t.widgets[r].showIfHidden){var s=c.previousSibling;if(/pre/i.test(s.nodeName)){var d=Fn("div",null,null,"position: relative");s.parentNode.replaceChild(d,s),d.appendChild(s),s=d}s.appendChild(T(t.widgets[r],s,l))}}else if(h&&f>=h.from&&h.to>f){for(;c.lineObj!=t;)c=o(c);a&&f>=i&&c.lineNumber&&Vn(c.lineNumber,g(e.options,f)),c=c.nextSibling}else{if(t.widgets)for(var p,m=0,v=c;v&&20>m;++m,v=v.nextSibling)if(v.lineObj==t&&/div/i.test(v.nodeName)){p=v;break}var y=S(e,t,f,l,p);if(y!=p)u.insertBefore(y,c);else{for(;c!=p;)c=o(c);c=c.nextSibling}y.lineObj=t}++f});c;)c=o(c)}function S(e,t,r,n,i){var o,l=Br(e,t),s=t.gutterMarkers,a=e.display;if(!(e.options.lineNumbers||s||t.bgClass||t.wrapClass||t.widgets))return l;if(i){for(var u,c=!0,h=0,f=i.firstChild;f;f=u)if(u=f.nextSibling,/\bCodeMirror-linewidget\b/.test(f.className)){for(var d=0,p=!0;t.widgets.length>d;++d){var m=t.widgets[d],v=!1;if(m.above||(v=p,p=!1),m.node==f.firstChild){h++,v&&i.insertBefore(l,f);break}}if(d==t.widgets.length){c=!1;break}}else i.removeChild(f);c&&h==t.widgets.length&&(o=i,i.className=t.wrapClass||"",i.alignable=null)}if(o||(o=Fn("div",null,t.wrapClass,"position: relative"),o.appendChild(l)),t.bgClass&&o.insertBefore(Fn("div"," ",t.bgClass+" CodeMirror-linebackground"),o.firstChild),e.options.lineNumbers||s){var y=o.insertBefore(Fn("div",null,null,"position: absolute; left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px"),o.firstChild);if(e.options.fixedGutter&&(o.alignable=[y]),!e.options.lineNumbers||s&&s["CodeMirror-linenumbers"]||(o.lineNumber=y.appendChild(Fn("div",g(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.lineNumInnerWidth+"px"))),s)for(var b=0;e.options.gutters.length>b;++b){var k=e.options.gutters[b],x=s.hasOwnProperty(k)&&s[k];x&&y.appendChild(Fn("div",[x],"CodeMirror-gutter-elt","left: "+n.gutterLeft[k]+"px; width: "+n.gutterWidth[k]+"px"))}}if(ti&&(o.style.zIndex=2),t.widgets&&o!=i)for(var d=0,C=t.widgets;C.length>d;++d){var m=C[d],L=T(m,o,n);m.above?o.insertBefore(L,e.options.lineNumbers&&0!=t.height?y:l):o.appendChild(L),wn(m,"redraw")}return o}function T(e,t,r){var n=Fn("div",[e.node],"CodeMirror-linewidget");if(n.widget=e,e.noHScroll){(t.alignable||(t.alignable=[])).push(n);var i=r.wrapperWidth;n.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,n.style.paddingLeft=r.gutterTotalWidth+"px"),n.style.width=i+"px"}return e.coverGutter&&(n.style.zIndex=5,n.style.position="relative",e.noHScroll||(n.style.marginLeft=-r.gutterTotalWidth+"px")),n}function M(e){var t=e.display,r=Ht(e.doc.sel.from,e.doc.sel.to);r||e.options.showCursorWhenSelecting?E(e):t.cursor.style.display=t.otherCursor.style.display="none",r?t.selectionDiv.style.display="none":z(e);var n=U(e,e.doc.sel.head,"div"),i=t.wrapper.getBoundingClientRect(),o=t.lineDiv.getBoundingClientRect();t.inputDiv.style.top=Math.max(0,Math.min(t.wrapper.clientHeight-10,n.top+o.top-i.top))+"px",t.inputDiv.style.left=Math.max(0,Math.min(t.wrapper.clientWidth-10,n.left+o.left-i.left))+"px"}function E(e){var t=e.display,r=U(e,e.doc.sel.head,"div");t.cursor.style.left=r.left+"px",t.cursor.style.top=r.top+"px",t.cursor.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",t.cursor.style.display="",r.other?(t.otherCursor.style.display="",t.otherCursor.style.left=r.other.left+"px",t.otherCursor.style.top=r.other.top+"px",t.otherCursor.style.height=.85*(r.other.bottom-r.other.top)+"px"):t.otherCursor.style.display="none"}function z(e){function t(e,t,r,n){0>t&&(t=0),l.appendChild(Fn("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==r?s-e:r)+"px; height: "+(n-t)+"px"))}function r(r,n,o,l){function u(t){return K(e,{line:r,ch:t},"div",c)}var c=_r(i,r),h=c.text.length,f=l?1/0:-1/0;return Gn(tn(c),n||0,null==o?h:o,function(e,r,i){var c=u("rtl"==i?r-1:e),d=u("rtl"==i?e:r-1),p=c.left,m=d.right;d.top-c.top>3&&(t(p,c.top,null,c.bottom),p=a,c.bottom<d.top&&t(p,c.bottom,null,d.top)),null==o&&r==h&&(m=s),null==n&&0==e&&(p=a),f=l?Math.min(d.top,f):Math.max(d.bottom,f),a+1>p&&(p=a),t(p,d.top,m-p,d.bottom)}),f}var n=e.display,i=e.doc,o=e.doc.sel,l=document.createDocumentFragment(),s=n.lineSpace.offsetWidth,a=I(e.display);if(o.from.line==o.to.line)r(o.from.line,o.from.ch,o.to.ch);else{for(var u,c,h=_r(i,o.from.line),f=h,d=[o.from.line,o.from.ch];u=kr(f);){var p=u.find();if(d.push(p.from.ch,p.to.line,p.to.ch),p.to.line==o.to.line){d.push(o.to.ch),c=!0;break}f=_r(i,p.to.line)}if(c)for(var m=0;d.length>m;m+=3)r(d[m],d[m+1],d[m+2]);else{var v,g,y=_r(i,o.to.line);v=o.from.ch?r(o.from.line,o.from.ch,null,!1):en(e,h)-n.viewOffset,g=o.to.ch?r(o.to.line,br(y)?null:0,o.to.ch,!0):en(e,y)-n.viewOffset,g>v&&t(a,v,null,g)}}Pn(n.selectionDiv,l),n.selectionDiv.style.display=""}function N(e){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursor.style.visibility=t.otherCursor.style.visibility="",t.blinker=setInterval(function(){t.cursor.offsetHeight&&(t.cursor.style.visibility=t.otherCursor.style.visibility=(r=!r)?"":"hidden")},e.options.cursorBlinkRate)}function D(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.showingTo&&e.state.highlight.set(t,On(A,e))}function A(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.showingTo)){var r,n=+new Date+e.options.workTime,i=er(t.mode,H(e,t.frontier)),o=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.showingTo+500),function(l){if(t.frontier>=e.display.showingFrom){var s=l.styles;l.styles=Wr(e,l,i);for(var a=!s||s.length!=l.styles.length,u=0;!a&&s.length>u;++u)a=s[u]!=l.styles[u];a&&(r&&r.end==t.frontier?r.end++:o.push(r={start:t.frontier,end:t.frontier+1})),l.stateAfter=er(t.mode,i)}else Or(e,l,i),l.stateAfter=0==t.frontier%5?er(t.mode,i):null;return++t.frontier,+new Date>n?(D(e,e.options.workDelay),!0):void 0}),o.length&&Z(e,function(){for(var e=0;o.length>e;++e)Q(this,o[e].start,o[e].end)})()}}function W(e,t){for(var r,n,i=e.doc,o=t,l=t-100;o>l;--o){if(i.first>=o)return i.first;var s=_r(i,o-1);if(s.stateAfter)return o;var a=Mn(s.text,null,e.options.tabSize);(null==n||r>a)&&(n=o-1,r=a)}return n}function H(e,t){var r=e.doc,n=e.display;if(!r.mode.startState)return!0;var i=W(e,t),o=i>r.first&&_r(r,i-1).stateAfter;return o=o?er(r.mode,o):tr(r.mode),r.iter(i,t,function(l){Or(e,l,o);var s=i==t-1||0==i%5||i>=n.showingFrom&&n.showingTo>i;l.stateAfter=s?er(r.mode,o):null,++i}),o}function O(e){return e.lineSpace.offsetTop}function I(e){var t=Pn(e.measure,Fn("pre")).appendChild(Fn("span","x"));return t.offsetLeft}function B(e,t,r,n){var i=-1;n=n||F(e,t);for(var o=r;;o+=i){var l=n[o];if(l)break;0>i&&0==o&&(i=1)}return{left:r>o?l.right:l.left,right:o>r?l.left:l.right,top:l.top,bottom:l.bottom}}function F(e,t){for(var r=e.display,n=e.display.measureLineCache,i=0;n.length>i;++i){var o=n[i];if(o.text==t.text&&o.markedSpans==t.markedSpans&&r.scroller.clientWidth==o.width)return o.measure}var l=R(e,t),o={text:t.text,width:r.scroller.clientWidth,markedSpans:t.markedSpans,measure:l};return 16==n.length?n[++r.measureLineCachePos%16]=o:n.push(o),l}function R(e,t){var r=e.display,n=Hn(t.text.length),i=Br(e,t,n);if(ei&&!ti&&!e.options.lineWrapping&&i.childNodes.length>100){for(var o=document.createDocumentFragment(),l=10,s=i.childNodes.length,a=0,u=Math.ceil(s/l);u>a;++a){for(var c=Fn("div",null,null,"display: inline-block"),h=0;l>h&&s;++h)c.appendChild(i.firstChild),--s;o.appendChild(c)}i.appendChild(o)}Pn(r.measure,i);for(var f,d=r.lineDiv.getBoundingClientRect(),p=[],m=Hn(t.text.length),v=i.offsetHeight,a=0;n.length>a;++a)if(f=n[a]){for(var g=f.getBoundingClientRect(),y=Math.max(0,g.top-d.top),b=Math.min(g.bottom-d.top,v),h=0;p.length>h;h+=2){var k=p[h],x=p[h+1];if(!(k>b||y>x)&&(y>=k&&x>=b||k>=y&&b>=x||Math.min(b,x)-Math.max(y,k)>=b-y>>1)){p[h]=Math.min(y,k),p[h+1]=Math.max(b,x);break}}h==p.length&&p.push(y,b),m[a]={left:g.left-d.left,right:g.right-d.left,top:h}}for(var f,a=0;m.length>a;++a)if(f=m[a]){var C=f.top;f.top=p[C],f.bottom=p[C+1]}return m}function P(e){e.display.measureLineCache.length=e.display.measureLineCachePos=0,e.display.cachedCharWidth=e.display.cachedTextHeight=null,e.display.maxLineChanged=!0}function V(e,t,r,n){if(t.widgets)for(var i=0;t.widgets.length>i;++i)if(t.widgets[i].above){var o=Mr(t.widgets[i]);r.top+=o,r.bottom+=o}if("line"==n)return r;n||(n="local");var l=en(e,t);if("local"!=n&&(l-=e.display.viewOffset),"page"==n){var s=e.display.lineSpace.getBoundingClientRect();l+=s.top+(window.pageYOffset||(document.documentElement||document.body).scrollTop);var a=s.left+(window.pageXOffset||(document.documentElement||document.body).scrollLeft);r.left+=a,r.right+=a}return r.top+=l,r.bottom+=l,r}function K(e,t,r,n){return n||(n=_r(e.doc,t.line)),V(e,n,B(e,n,t.ch),r)}function U(e,t,r,n,i){function o(t,o){var l=B(e,n,t,i);return o?l.left=l.right:l.right=l.left,V(e,n,l,r)}n=n||_r(e.doc,t.line),i||(i=F(e,n));var l=tn(n),s=t.ch;if(!l)return o(s);for(var a,u,c=l[0].level,h=0;l.length>h;++h){var f,d,p=l[h],m=p.level%2;if(s>p.from&&p.to>s)return o(s,m);var v=m?p.to:p.from,g=m?p.from:p.to;if(v==s)d=h&&p.level<(f=l[h-1]).level?o(f.level%2?f.from:f.to-1,!0):o(m&&p.from!=p.to?s-1:s),m==c?a=d:u=d;else if(g==s){var f=l.length-1>h&&l[h+1];if(!m&&f&&f.from==f.to)continue;d=f&&p.level<f.level?o(f.level%2?f.to-1:f.from):o(m?s:s-1,!0),m==c?a=d:u=d}}return c&&!s&&(u=o(l[0].to-1)),a?(u&&(a.other=u),a):u}function G(e,t,r){var n=e.doc;if(r+=e.display.viewOffset,0>r)return{line:n.first,ch:0,outside:!0};var i=Qr(n,r),o=n.first+n.size-1;if(i>o)return{line:n.size-1,ch:_r(n,o).text.length};for(0>t&&(t=0);;){var l=_r(n,i),s=X(e,l,i,t,r),a=kr(l),u=a&&a.find();if(!(a&&s.ch>=u.from.ch))return s;i=u.to.line}}function X(e,t,r,n,i){function o(n){var i=U(e,{line:r,ch:n},"line",t,u);return s=!0,l>i.bottom?Math.max(0,i.left-a):i.top>l?i.left+a:(s=!1,i.left)}var l=i-en(e,t),s=!1,a=e.display.wrapper.clientWidth,u=F(e,t),c=tn(t),h=t.text.length,f=_n(t),d=jn(t),p=I(e.display),m=o(d);if(n>m)return{line:r,ch:d,outside:s};for(;;){if(c?d==f||d==qn(t,f,1):1>=d-f){for(var v=m-n>n-p,g=v?f:d;Zi.test(t.text.charAt(g));)++g;return{line:r,ch:g,after:v,outside:s}}var y=Math.ceil(h/2),b=f+y;if(c){b=f;for(var k=0;y>k;++k)b=qn(t,b,1)}var x=o(b);x>n?(d=b,m=x,s&&(m+=1e3),h-=y):(f=b,p=x,h=y)}}function Y(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==gi){gi=Fn("pre");for(var t=0;49>t;++t)gi.appendChild(document.createTextNode("x")),gi.appendChild(Fn("br"));gi.appendChild(document.createTextNode("x"))}Pn(e.measure,gi);var r=gi.offsetHeight/50;return r>3&&(e.cachedTextHeight=r),Rn(e.measure),r||1}function _(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=Fn("span","x"),r=Fn("pre",[t]);Pn(e.measure,r);var n=t.offsetWidth;return n>2&&(e.cachedCharWidth=n),n||10}function j(e){e.curOp={changes:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,updateMaxLine:!1,updateScrollPos:!1,id:++e.nextOpId},Xi++||(Gi=[])}function $(e){var t,r=e.curOp,n=e.doc;--Xi||(t=Gi,Gi=null),e.curOp=null;var i=e.display;if(r.updateMaxLine&&h(e),e.display.maxLineChanged&&!e.options.lineWrapping){var o=B(e,e.display.maxLine,e.display.maxLine.text.length).right;i.sizer.style.minWidth=o+3+Yi+"px",e.display.maxLineChanged=!1;var l=Math.max(0,i.sizer.offsetLeft+i.sizer.offsetWidth-i.scroller.clientWidth);n.scrollLeft>l&&!r.updateScrollPos&&pt(e,Math.min(i.scroller.scrollLeft,l),!0)}var s,a;if(r.updateScrollPos)s=r.updateScrollPos;else if(r.selectionChanged){var u=U(e,n.sel.head);s=_t(e,u.left,u.top,u.left,u.bottom)}(r.changes.length||s&&null!=s.scrollTop)&&(a=b(e,r.changes,s&&s.scrollTop)),!a&&r.selectionChanged&&M(e),r.updateScrollPos?(e.display.scroller.scrollTop=e.display.scrollbarV.scrollTop=n.scrollTop=s.scrollTop,e.display.scroller.scrollLeft=e.display.scrollbarH.scrollLeft=n.scrollLeft=s.scrollLeft,m(e)):s&&Gt(e),r.selectionChanged&&N(e),e.state.focused&&r.updateInput&&nt(e,r.userSelChange);var c=r.maybeHiddenMarkers,f=r.maybeUnhiddenMarkers;if(c)for(var d=0;c.length>d;++d)c[d].lines.length||Ln(c[d],"hide");if(f)for(var d=0;f.length>d;++d)f[d].lines.length&&Ln(f[d],"unhide");if(r.textChanged&&Ln(e,"change",e,r.textChanged),r.selectionChanged&&Ln(e,"cursorActivity",e),t)for(var d=0;t.length>d;++d)t[d](e)}function Z(e,t){return function(){var r=e||this,n=!r.curOp;n&&j(r);try{var i=t.apply(r,arguments)}finally{n&&$(r)}return i}}function q(e){return function(){var t,r=this.cm&&!this.cm.curOp;r&&j(this.cm);try{t=e.apply(this,arguments)}finally{r&&$(this.cm)}return t}}function J(e,t){var r,n=!e.curOp;n&&j(e);try{r=t()}finally{n&&$(e)}return r}function Q(e,t,r,n){null==t&&(t=e.doc.first),null==r&&(r=e.doc.first+e.doc.size),e.curOp.changes.push({from:t,to:r,diff:n})}function et(e){e.display.pollingFast||e.display.poll.set(e.options.pollInterval,function(){rt(e),e.state.focused&&et(e)})}function tt(e){function t(){var n=rt(e);n||r?(e.display.pollingFast=!1,et(e)):(r=!0,e.display.poll.set(60,t))}var r=!1;e.display.pollingFast=!0,e.display.poll.set(20,t)}function rt(e){var t=e.display.input,r=e.display.prevInput,n=e.doc,i=n.sel;if(!e.state.focused||ro(t)||ot(e))return!1;var o=t.value;if(o==r&&Ht(i.from,i.to))return!1;var l=!e.curOp;l&&j(e),i.shift=!1;for(var s=0,a=Math.min(r.length,o.length);a>s&&r[s]==o[s];)++s;var u=i.from,c=i.to;r.length>s?u={line:u.line,ch:u.ch-(r.length-s)}:e.state.overwrite&&Ht(u,c)&&!e.state.pasteIncoming&&(c={line:c.line,ch:Math.min(_r(n,c.line).text.length,c.ch+(o.length-s))});var h=e.curOp.updateInput;return Mt(e.doc,{from:u,to:c,text:to(o.slice(s)),origin:e.state.pasteIncoming?"paste":"input"},"end"),e.curOp.updateInput=h,o.length>1e3?t.value=e.display.prevInput="":e.display.prevInput=o,l&&$(e),e.state.pasteIncoming=!1,!0}function nt(e,t){var r,n,i=e.doc;Ht(i.sel.from,i.sel.to)?t&&(e.display.prevInput=e.display.input.value=""):(e.display.prevInput="",r=no&&(i.sel.to.line-i.sel.from.line>100||(n=e.getSelection()).length>1e3),e.display.input.value=r?"-":n||e.getSelection(),e.state.focused&&Nn(e.display.input)),e.display.inaccurateSelection=r}function it(e){"nocursor"==e.options.readOnly||!ei&&document.activeElement==e.display.input||e.display.input.focus()}function ot(e){return e.options.readOnly||e.doc.cantEdit}function lt(e){function t(){e.state.focused&&setTimeout(On(it,e),0)}function r(){o.cachedCharWidth=o.cachedTextHeight=null,P(e),J(e,On(Q,e))}function n(t){e.options.onDragEvent&&e.options.onDragEvent(e,pn(t))||gn(t)}function i(){o.inaccurateSelection&&(o.prevInput="",o.inaccurateSelection=!1,o.input.value=e.getSelection(),Nn(o.input))}var o=e.display;xn(o.scroller,"mousedown",Z(e,ut)),xn(o.scroller,"dblclick",Z(e,mn)),xn(o.lineSpace,"selectstart",function(e){st(o,e)||mn(e)}),Qn||xn(o.scroller,"contextmenu",function(t){wt(e,t)}),xn(o.scroller,"scroll",function(){dt(e,o.scroller.scrollTop),pt(e,o.scroller.scrollLeft,!0),Ln(e,"scroll",e)}),xn(o.scrollbarV,"scroll",function(){dt(e,o.scrollbarV.scrollTop)}),xn(o.scrollbarH,"scroll",function(){pt(e,o.scrollbarH.scrollLeft)}),xn(o.scroller,"mousewheel",function(t){mt(e,t)}),xn(o.scroller,"DOMMouseScroll",function(t){mt(e,t)}),xn(o.scrollbarH,"mousedown",t),xn(o.scrollbarV,"mousedown",t),xn(o.wrapper,"scroll",function(){o.wrapper.scrollTop=o.wrapper.scrollLeft=0}),xn(window,"resize",r),setTimeout(function l(){for(var e=o.wrapper.parentNode;e&&e!=document.body;e=e.parentNode);e?setTimeout(l,5e3):Cn(window,"resize",r)},5e3),xn(o.input,"keyup",Z(e,function(t){e.options.onKeyEvent&&e.options.onKeyEvent(e,pn(t))||16==kn(t,"keyCode")&&(e.doc.sel.shift=!1)})),xn(o.input,"input",On(tt,e)),xn(o.input,"keydown",Z(e,kt)),xn(o.input,"keypress",Z(e,xt)),xn(o.input,"focus",On(Ct,e)),xn(o.input,"blur",On(Lt,e)),e.options.dragDrop&&(xn(o.scroller,"dragstart",function(t){ft(e,t)}),xn(o.scroller,"dragenter",n),xn(o.scroller,"dragover",n),xn(o.scroller,"drop",Z(e,ct))),xn(o.scroller,"paste",function(t){st(o,t)||(it(e),tt(e))}),xn(o.input,"paste",function(){e.state.pasteIncoming=!0,tt(e)}),xn(o.input,"cut",i),xn(o.input,"copy",i),ai&&xn(o.sizer,"mouseup",function(){document.activeElement==o.input&&o.input.blur(),it(e)})}function st(e,t){for(var r=yn(t);r!=e.wrapper;r=r.parentNode){if(!r)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(r.className)||r.parentNode==e.sizer&&r!=e.mover)return!0}}function at(e,t,r){var n=e.display;if(!r){var i=yn(t);if(i==n.scrollbarH||i==n.scrollbarH.firstChild||i==n.scrollbarV||i==n.scrollbarV.firstChild||i==n.scrollbarFiller)return null}var o,l,s=n.lineSpace.getBoundingClientRect();try{o=t.clientX,l=t.clientY}catch(t){return null}return G(e,o-s.left,l-s.top)}function ut(e){function t(e){if("single"==c)return Pt(i.doc,Ft(l,a),e),void 0;if(m=Ft(l,m),v=Ft(l,v),"double"==c){var t=qt(_r(l,e.line).text,e);Ot(e,m)?Pt(i.doc,t.from,v):Pt(i.doc,m,t.to)}else"triple"==c&&(Ot(e,m)?Pt(i.doc,v,Ft(l,{line:e.line,ch:0})):Pt(i.doc,m,Ft(l,{line:e.line+1,ch:0})))}function r(e){var n=++y,s=at(i,e,!0);if(s)if(Ht(s,f)){var a=e.clientY<g.top?-20:e.clientY>g.bottom?20:0;a&&setTimeout(Z(i,function(){y==n&&(o.scroller.scrollTop+=a,r(e))}),50)}else{i.state.focused||Ct(i),f=s,t(s);var u=p(o,l);(s.line>=u.to||s.line<u.from)&&setTimeout(Z(i,function(){y==n&&r(e)}),150)}}function n(e){y=1/0;var r=at(i,e);r&&t(r),mn(e),it(i),Cn(document,"mousemove",b),Cn(document,"mouseup",k)}var i=this,o=i.display,l=i.doc,s=l.sel;if(s.shift=kn(e,"shiftKey"),st(o,e))return ni||(o.scroller.draggable=!1,setTimeout(function(){o.scroller.draggable=!0},100)),void 0;if(!ht(i,e)){var a=at(i,e);switch(bn(e)){case 3:return Qn&&wt.call(i,i,e),void 0;case 2:return a&&Pt(i.doc,a),setTimeout(On(it,i),20),mn(e),void 0}if(!a)return yn(e)==o.scroller&&mn(e),void 0;i.state.focused||Ct(i);var u=+new Date,c="single";if(bi&&bi.time>u-400&&Ht(bi.pos,a))c="triple",mn(e),setTimeout(On(it,i),20),Jt(i,a.line);else if(yi&&yi.time>u-400&&Ht(yi.pos,a)){c="double",bi={time:u,pos:a},mn(e);var h=qt(_r(l,a.line).text,a);Pt(i.doc,h.from,h.to)}else yi={time:u,pos:a};var f=a;if(i.options.dragDrop&&qi&&!ot(i)&&!Ht(s.from,s.to)&&!Ot(a,s.from)&&!Ot(s.to,a)&&"single"==c){var d=Z(i,function(t){ni&&(o.scroller.draggable=!1),i.state.draggingText=!1,Cn(document,"mouseup",d),Cn(o.scroller,"drop",d),10>Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)&&(mn(t),Pt(i.doc,a),it(i))});return ni&&(o.scroller.draggable=!0),i.state.draggingText=d,o.scroller.dragDrop&&o.scroller.dragDrop(),xn(document,"mouseup",d),xn(o.scroller,"drop",d),void 0}mn(e),"single"==c&&Pt(i.doc,Ft(l,a));var m=s.from,v=s.to,g=o.wrapper.getBoundingClientRect(),y=0,b=Z(i,function(e){ei||bn(e)?r(e):n(e)}),k=Z(i,n);xn(document,"mousemove",b),xn(document,"mouseup",k)}}function ct(e){var t=this;if(!(st(t.display,e)||t.options.onDragEvent&&t.options.onDragEvent(t,pn(e)))){mn(e);var r=at(t,e,!0),n=e.dataTransfer.files;if(r&&!ot(t))if(n&&n.length&&window.FileReader&&window.File)for(var i=n.length,o=Array(i),l=0,s=function(e,n){var s=new FileReader;s.onload=function(){o[n]=s.result,++l==i&&(r=Ft(t.doc,r),Wt(t.doc,o.join(""),r,"around","paste"))},s.readAsText(e)},a=0;i>a;++a)s(n[a],a);else{if(t.state.draggingText&&!Ot(r,t.doc.sel.from)&&!Ot(t.doc.sel.to,r))return t.state.draggingText(e),setTimeout(On(it,t),20),void 0;try{var o=e.dataTransfer.getData("Text");if(o){var u=t.doc.sel.from,c=t.doc.sel.to;Vt(t.doc,r,r),t.state.draggingText&&Wt(t.doc,"",u,c,"paste"),t.replaceSelection(o,null,"paste"),it(t),Ct(t)}}catch(e){}}}}function ht(e,t){var r=e.display;try{var n=t.clientX,i=t.clientY}catch(t){return!1}if(n>=Math.floor(r.gutters.getBoundingClientRect().right))return!1;if(mn(t),!Sn(e,"gutterClick"))return!0;var o=r.lineDiv.getBoundingClientRect();if(i>o.bottom)return!0;i-=o.top-r.viewOffset;for(var l=0;e.options.gutters.length>l;++l){var s=r.gutters.childNodes[l];if(s&&s.getBoundingClientRect().right>=n){var a=Qr(e.doc,i),u=e.options.gutters[l];wn(e,"gutterClick",e,a,u,t);break}}return!0}function ft(e,t){if(!st(e.display,t)){var r=e.getSelection();if(t.dataTransfer.setData("Text",r),t.dataTransfer.setDragImage&&!si){var n=Fn("img",null,null,"position: fixed; left: 0; top: 0;");li&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),li&&n.parentNode.removeChild(n)}}}function dt(e,t){2>Math.abs(e.doc.scrollTop-t)||(e.doc.scrollTop=t,Qn||b(e,[],t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbarV.scrollTop!=t&&(e.display.scrollbarV.scrollTop=t),Qn&&b(e,[]))}function pt(e,t,r){(r?t==e.doc.scrollLeft:2>Math.abs(e.doc.scrollLeft-t))||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,m(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t))}function mt(e,t){var r=t.wheelDeltaX,n=t.wheelDeltaY;if(null==r&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(r=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta),n&&pi&&ni)for(var i=t.target;i!=l;i=i.parentNode)if(i.lineObj){e.display.currentWheelTarget=i;break}var o=e.display,l=o.scroller;if(r&&!Qn&&!li&&null!=wi)return n&&dt(e,Math.max(0,Math.min(l.scrollTop+n*wi,l.scrollHeight-l.clientHeight))),pt(e,Math.max(0,Math.min(l.scrollLeft+r*wi,l.scrollWidth-l.clientWidth))),mn(t),o.wheelStartX=null,void 0;
if(n&&null!=wi){var s=n*wi,a=e.doc.scrollTop,u=a+o.wrapper.clientHeight;0>s?a=Math.max(0,a+s-50):u=Math.min(e.doc.height,u+s+50),b(e,[],{top:a,bottom:u})}20>Li&&(null==o.wheelStartX?(o.wheelStartX=l.scrollLeft,o.wheelStartY=l.scrollTop,o.wheelDX=r,o.wheelDY=n,setTimeout(function(){if(null!=o.wheelStartX){var e=l.scrollLeft-o.wheelStartX,t=l.scrollTop-o.wheelStartY,r=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,r&&(wi=(wi*Li+r)/(Li+1),++Li)}},200)):(o.wheelDX+=r,o.wheelDY+=n))}function vt(e,t,r){if("string"==typeof t&&(t=Oi[t],!t))return!1;e.display.pollingFast&&rt(e)&&(e.display.pollingFast=!1);var n=e.doc,i=n.sel.shift;try{ot(e)&&(e.state.suppressEdits=!0),r&&(n.sel.shift=!1),t(e)}catch(o){if(o!=_i)throw o;return!1}finally{n.sel.shift=i,e.state.suppressEdits=!1}return!0}function gt(e){var t=e.state.keyMaps.slice(0);return t.push(e.options.keyMap),e.options.extraKeys&&t.unshift(e.options.extraKeys),t}function yt(e,t){function r(){s=!0}var n=rr(e.options.keyMap),i=n.auto;clearTimeout(Si),i&&!ir(t)&&(Si=setTimeout(function(){rr(e.options.keyMap)==n&&(e.options.keyMap=i.call?i.call(null,e):i)},50));var o=io[kn(t,"keyCode")],l=!1;if(null==o||t.altGraphKey)return!1;kn(t,"altKey")&&(o="Alt-"+o),kn(t,ki?"metaKey":"ctrlKey")&&(o="Ctrl-"+o),kn(t,ki?"ctrlKey":"metaKey")&&(o="Cmd-"+o);var s=!1,a=gt(e);return l=kn(t,"shiftKey")?nr("Shift-"+o,a,function(t){return vt(e,t,!0)},r)||nr(o,a,function(t){return"string"==typeof t&&/^go[A-Z]/.test(t)?vt(e,t):void 0},r):nr(o,a,function(t){return vt(e,t)},r),s&&(l=!1),l&&(mn(t),N(e),ri&&(t.oldKeyCode=t.keyCode,t.keyCode=0)),l}function bt(e,t,r){var n=nr("'"+r+"'",gt(e),function(t){return vt(e,t,!0)});return n&&(mn(t),N(e)),n}function kt(e){var t=this;if(t.state.focused||Ct(t),ei&&27==e.keyCode&&(e.returnValue=!1),!t.options.onKeyEvent||!t.options.onKeyEvent(t,pn(e))){var r=kn(e,"keyCode");t.doc.sel.shift=16==r||kn(e,"shiftKey");var n=yt(t,e);li&&(Mi=n?r:null,n||88!=r||no||!kn(e,pi?"metaKey":"ctrlKey")||t.replaceSelection(""))}}function xt(e){var t=this;if(!t.options.onKeyEvent||!t.options.onKeyEvent(t,pn(e))){var r=kn(e,"keyCode"),n=kn(e,"charCode");if(li&&r==Mi)return Mi=null,mn(e),void 0;if(!(li&&(!e.which||10>e.which)||ai)||!yt(t,e)){var i=String.fromCharCode(null==n?r:n);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!ot(this)&&this.doc.mode.electricChars.indexOf(i)>-1&&setTimeout(Z(t,function(){jt(t,t.doc.sel.to.line,"smart")}),75),bt(t,e,i)||tt(t)}}}function Ct(e){"nocursor"!=e.options.readOnly&&(e.state.focused||(Ln(e,"focus",e),e.state.focused=!0,-1==e.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(e.display.wrapper.className+=" CodeMirror-focused"),nt(e,!0)),et(e),N(e))}function Lt(e){e.state.focused&&(Ln(e,"blur",e),e.state.focused=!1,e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.doc.sel.shift=!1)},150)}function wt(e,t){function r(){if(n.inputDiv.style.position="relative",n.input.style.cssText=s,ri&&(n.scrollbarV.scrollTop=n.scroller.scrollTop=l),et(e),null!=n.input.selectionStart){clearTimeout(Ti);var t=n.input.value=" "+(Ht(i.from,i.to)?"":n.input.value),r=0;n.prevInput=" ",n.input.selectionStart=1,n.input.selectionEnd=t.length,Ti=setTimeout(function o(){" "==n.prevInput&&0==n.input.selectionStart?Z(e,Oi.selectAll)(e):10>r++?Ti=setTimeout(o,500):nt(e)},200)}}var n=e.display,i=e.doc.sel;if(!st(n,t)){var o=at(e,t),l=n.scroller.scrollTop;if(o&&!li){(Ht(i.from,i.to)||Ot(o,i.from)||!Ot(o,i.to))&&Z(e,Vt)(e.doc,o,o);var s=n.input.style.cssText;n.inputDiv.style.position="absolute",n.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: white; outline: none;"+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",it(e),nt(e,!0),Ht(i.from,i.to)&&(n.input.value=n.prevInput=" "),Qn?(gn(t),xn(window,"mouseup",function a(){Cn(window,"mouseup",a),setTimeout(r,20)})):setTimeout(r,50)}}}function St(e){return{line:e.from.line+e.text.length-1,ch:zn(e.text).length+(1==e.text.length?e.from.ch:0)}}function Tt(e,t,r){if(r&&"object"==typeof r)return r;if("start"==r)return{anchor:t.from,head:t.from};var n=St(t);if("around"==r)return{anchor:t.from,head:n};if("end"==r)return{anchor:n,head:n};var i=function(e){if(Ot(e,t.from))return e;if(!Ot(t.to,e))return n;var r=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=n.ch-t.to.ch),{line:r,ch:i}};return{anchor:i(e.anchor),head:i(e.head)}}function Mt(e,t,r,n){if(e.cm){if(!e.cm.curOp)return Z(e.cm,Mt)(e,t,r,n);if(e.cm.state.suppressEdits)return}var i=xi&&!n&&gr(e,t.from,t.to);if(i){for(var o=i.length-1;o>=1;--o)Et(e,{from:i[o].from,to:i[o].to,text:[""]});i.length&&Et(e,{from:i[0].from,to:i[0].to,text:t.text},r)}else Et(e,t,r)}function Et(e,t,r){var n=Tt(e.sel,t,r);ln(e,t,n,e.cm?e.cm.curOp.id:0/0),Dt(e,t,n,mr(e,t));var i=[];Xr(e,function(e,r){r||-1!=Dn(i,e.history)||(fn(e.history,t),i.push(e.history)),Dt(e,t,null,mr(e,t))})}function zt(e,t){var r=e.history,n=("undo"==t?r.done:r.undone).pop();if(n){r.dirtyCounter+="undo"==t?-1:1;var i={changes:[],anchorBefore:n.anchorAfter,headBefore:n.headAfter,anchorAfter:n.anchorBefore,headAfter:n.headBefore};("undo"==t?r.undone:r.done).push(i);for(var o=n.changes.length-1;o>=0;--o){var l=n.changes[o];l.origin=t,i.changes.push(on(e,l));var s=o?Tt(e.sel,l,null):{anchor:n.anchorBefore,head:n.headBefore};Dt(e,l,s,vr(e,l));var a=[];Xr(e,function(e,t){t||-1!=Dn(a,e.history)||(fn(e.history,l),a.push(e.history)),Dt(e,l,null,vr(e,l))})}}}function Nt(e,t){function r(e){return{line:e.line+t,ch:e.ch}}e.first+=t,e.cm&&Q(e.cm,e.first,e.first,t),e.sel.head=r(e.sel.head),e.sel.anchor=r(e.sel.anchor),e.sel.from=r(e.sel.from),e.sel.to=r(e.sel.to)}function Dt(e,t,r,n){if(e.cm&&!e.cm.curOp)return Z(e.cm,Dt)(e,t,r,n);if(t.to.line<e.first)return Nt(e,t.text.length-1-(t.to.line-t.from.line)),void 0;if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);Nt(e,i),t={from:{line:e.first,ch:0},to:{line:t.to.line+i,ch:t.to.ch},text:[zn(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:{line:o,ch:_r(e,o).text.length},text:[t.text[0]],origin:t.origin}),r||(r=Tt(e.sel,t,null)),e.cm?At(e.cm,t,n,r):Kr(e,t,n,r)}}function At(e,t,r,n){var o=e.doc,l=e.display,s=t.from,a=t.to,u=!1,h=s.line;e.options.lineWrapping||(h=qr(xr(o,_r(o,s.line))),o.iter(h,a.line+1,function(e){return e==l.maxLine?(u=!0,!0):void 0})),Kr(o,t,r,n,i(e)),e.options.lineWrapping||(o.iter(h,s.line+t.text.length,function(e){var t=c(o,e);t>l.maxLineLength&&(l.maxLine=e,l.maxLineLength=t,l.maxLineChanged=!0,u=!1)}),u&&(e.curOp.updateMaxLine=!0)),o.frontier=Math.min(o.frontier,s.line),D(e,400);var f=t.text.length-(a.line-s.line)-1;if(Q(e,s.line,a.line+1,f),Sn(e,"change")){var d={from:s,to:a,text:t.text,origin:t.origin};if(e.curOp.textChanged){for(var p=e.curOp.textChanged;p.next;p=p.next);p.next=d}else e.curOp.textChanged=d}}function Wt(e,t,r,n,i){if(n||(n=r),Ot(n,r)){var o=n;n=r,r=o}"string"==typeof t&&(t=to(t)),Mt(e,{from:r,to:n,text:t,origin:i},null)}function Ht(e,t){return e.line==t.line&&e.ch==t.ch}function Ot(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function It(e){return{line:e.line,ch:e.ch}}function Bt(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Ft(e,t){if(t.line<e.first)return{line:e.first,ch:0};var r=e.first+e.size-1;if(t.line>r)return{line:r,ch:_r(e,r).text.length};var n=t.ch,i=_r(e,t.line).text.length;return null==n||n>i?{line:t.line,ch:i}:0>n?{line:t.line,ch:0}:t}function Rt(e,t){return t>=e.first&&e.first+e.size>t}function Pt(e,t,r,n){if(e.sel.shift||e.sel.extend){var i=e.sel.anchor;if(r){var o=Ot(t,i);o!=Ot(r,i)?(i=t,t=r):o!=Ot(t,r)&&(t=r)}Vt(e,i,t,n)}else Vt(e,t,r||t,n);e.cm&&(e.cm.curOp.userSelChange=!0)}function Vt(e,t,r,n,i){var o=e.sel;if(o.goalColumn=null,(i||!Ht(t,o.anchor))&&(t=Ut(e,t,n,"push"!=i)),(i||!Ht(r,o.head))&&(r=Ut(e,r,n,"push"!=i)),!Ht(o.anchor,t)||!Ht(o.head,r)){o.anchor=t,o.head=r;var l=Ot(r,t);o.from=l?r:t,o.to=l?t:r,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0)}}function Kt(e){Vt(e.doc,e.doc.sel.from,e.doc.sel.to,null,"push")}function Ut(e,t,r,n){var i=!1,o=t,l=r||1;e.cantEdit=!1;e:for(;;){var s,a=_r(e,o.line);if(a.markedSpans){for(var u=0;a.markedSpans.length>u;++u){var c=a.markedSpans[u],h=c.marker;if((null==c.from||(h.inclusiveLeft?c.from<=o.ch:c.from<o.ch))&&(null==c.to||(h.inclusiveRight?c.to>=o.ch:c.to>o.ch))){if(n&&h.clearOnEnter){(s||(s=[])).push(h);continue}if(!h.atomic)continue;var f=h.find()[0>l?"from":"to"];if(Ht(f,o)&&(f.ch+=l,0>f.ch?f=f.line>e.first?Ft(e,{line:f.line-1}):null:f.ch>a.text.length&&(f=f.line<e.first+e.size-1?{line:f.line+1,ch:0}:null),!f)){if(i)return n?(e.cantEdit=!0,{line:e.first,ch:0}):Ut(e,t,r,!0);i=!0,f=t,l=-l}o=f;continue e}}if(s)for(var u=0;s.length>u;++u)s[u].clear()}return o}}function Gt(e){var t=Xt(e,e.doc.sel.head);if(e.state.focused){var r=e.display,n=r.sizer.getBoundingClientRect(),i=null;if(0>t.top+n.top?i=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!hi){var o="none"==r.cursor.style.display;o&&(r.cursor.style.display="",r.cursor.style.left=t.left+"px",r.cursor.style.top=t.top-r.viewOffset+"px"),r.cursor.scrollIntoView(i),o&&(r.cursor.style.display="none")}}}function Xt(e,t){for(;;){var r=!1,n=U(e,t),i=_t(e,n.left,n.top,n.left,n.bottom),o=e.doc.scrollTop,l=e.doc.scrollLeft;if(null!=i.scrollTop&&(dt(e,i.scrollTop),Math.abs(e.doc.scrollTop-o)>1&&(r=!0)),null!=i.scrollLeft&&(pt(e,i.scrollLeft),Math.abs(e.doc.scrollLeft-l)>1&&(r=!0)),!r)return n}}function Yt(e,t,r,n,i){var o=_t(e,t,r,n,i);null!=o.scrollTop&&dt(e,o.scrollTop),null!=o.scrollLeft&&pt(e,o.scrollLeft)}function _t(e,t,r,n,i){var o=e.display,l=O(o);r+=l,i+=l;var s=o.scroller.clientHeight-Yi,a=o.scroller.scrollTop,u={},c=e.doc.height+2*l,h=l+10>r,f=i+l>c-10;a>r?u.scrollTop=h?0:Math.max(0,r):i>a+s&&(u.scrollTop=(f?c:i)-s);var d=o.scroller.clientWidth-Yi,p=o.scroller.scrollLeft;t+=o.gutters.offsetWidth,n+=o.gutters.offsetWidth;var m=o.gutters.offsetWidth,v=m+10>t;return p+m>t||v?(v&&(t=0),u.scrollLeft=Math.max(0,t-10-m)):n>d+p-3&&(u.scrollLeft=n+10-d),u}function jt(e,t,r,n){var i=e.doc;if(r||(r="add"),"smart"==r)if(e.doc.mode.indent)var o=H(e,t);else r="prev";var l,s=e.options.tabSize,a=_r(i,t),u=Mn(a.text,null,s),c=a.text.match(/^\s*/)[0];if("smart"==r&&(l=e.doc.mode.indent(o,a.text.slice(c.length),a.text),l==_i)){if(!n)return;r="prev"}"prev"==r?l=t>i.first?Mn(_r(i,t-1).text,null,s):0:"add"==r?l=u+e.options.indentUnit:"subtract"==r&&(l=u-e.options.indentUnit),l=Math.max(0,l);var h="",f=0;if(e.options.indentWithTabs)for(var d=Math.floor(l/s);d;--d)f+=s,h+="	";l>f&&(h+=En(l-f)),h!=c&&Wt(e.doc,h,{line:t,ch:0},{line:t,ch:c.length},"input"),a.stateAfter=null}function $t(e,t,r){var n=t,i=t,o=e.doc;return"number"==typeof t?i=_r(o,Bt(o,t)):n=qr(t),null==n?null:r(i,n)?(Q(e,n,n+1),i):null}function Zt(e,t,r,n){function i(){var r=s+t;return e.first>r||r>=e.first+e.size?!1:(s=r,u=_r(e,r))}function o(e){var r=(n?qn:Jn)(u,a,t,!0);if(null==r){if(e||!i())return!1;a=n?(0>t?jn:_n)(u):0>t?u.text.length:0}else a=r;return!0}var l=e.sel.head,s=l.line,a=l.ch,u=_r(e,s);if("char"==r)o();else if("column"==r)o(!0);else if("word"==r)for(var c=!1;!(0>t)||o();){if(In(u.text.charAt(a)))c=!0;else if(c){0>t&&(t=1,o());break}if(t>0&&!o())break}return Ut(e,{line:s,ch:a},t,!0)}function qt(e,t){var r=t.ch,n=t.ch;if(e){t.after===!1||n==e.length?--r:++n;for(var i=e.charAt(r),o=In(i)?In:/\s/.test(i)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!In(e)};r>0&&o(e.charAt(r-1));)--r;for(;e.length>n&&o(e.charAt(n));)++n}return{from:{line:t.line,ch:r},to:{line:t.line,ch:n}}}function Jt(e,t){Pt(e.doc,{line:t,ch:0},Ft(e.doc,{line:t+1,ch:0}))}function Qt(t,r,n,i){e.defaults[t]=r,n&&(Ei[t]=i?function(e,t,r){r!=Ni&&n(e,t,r)}:n)}function er(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var i=t[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r}function tr(e,t,r){return e.startState?e.startState(t,r):!0}function rr(e){return"string"==typeof e?Ii[e]:e}function nr(e,t,r,n){function i(t){t=rr(t);var o=t[e];if(o===!1)return n&&n(),!0;if(null!=o&&r(o))return!0;if(t.nofallthrough)return n&&n(),!0;var l=t.fallthrough;if(null==l)return!1;if("[object Array]"!=Object.prototype.toString.call(l))return i(l);for(var s=0,a=l.length;a>s;++s)if(i(l[s]))return!0;return!1}for(var o=0;t.length>o;++o)if(i(t[o]))return!0}function ir(e){var t=io[kn(e,"keyCode")];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function or(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8}function lr(e,t){this.lines=[],this.type=t,this.doc=e}function sr(e,t,r,n,i){if(n&&n.shared)return ur(e,t,r,n,i);if(e.cm&&!e.cm.curOp)return Z(e.cm,sr)(e,t,r,n,i);var o=new lr(e,i);if("range"==i&&!Ot(t,r))return o;n&&Wn(n,o),o.replacedWith&&(o.collapsed=!0,o.replacedWith=Fn("span",[o.replacedWith],"CodeMirror-widget")),o.collapsed&&(Ci=!0);var l,s,a,u=t.line,c=0,h=e.cm;if(e.iter(u,r.line+1,function(n){h&&o.collapsed&&!h.options.lineWrapping&&xr(e,n)==h.display.maxLine&&(a=!0);var i={from:null,to:null,marker:o};c+=n.text.length,u==t.line&&(i.from=t.ch,c-=t.ch),u==r.line&&(i.to=r.ch,c-=n.text.length-r.ch),o.collapsed&&(u==r.line&&(s=yr(n,r.ch)),u==t.line?l=yr(n,t.ch):Zr(n,0)),fr(n,i),++u}),o.collapsed&&e.iter(t.line,r.line+1,function(e){Cr(e)&&Zr(e,0)}),o.readOnly&&(xi=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed){if(l!=s)throw Error("Inserting collapsed marker overlapping an existing one");o.size=c,o.atomic=!0}return h&&(a&&(h.curOp.updateMaxLine=!0),(o.className||o.startStyle||o.endStyle||o.collapsed)&&Q(h,t.line,r.line+1),o.atomic&&Kt(h)),o}function ar(e,t){this.markers=e,this.primary=t;for(var r=0,n=this;e.length>r;++r)e[r].parent=this,xn(e[r],"clear",function(){n.clear()})}function ur(e,t,r,n,i){n=Wn(n),n.shared=!1;var o=[sr(e,t,r,n,i)],l=o[0];return Xr(e,function(e){o.push(sr(e,Ft(e,t),Ft(e,r),n,i));for(var s=0;e.linked.length>s;++s)if(e.linked[s].isParent)return;l=zn(o)}),new ar(o,l)}function cr(e,t){if(e)for(var r=0;e.length>r;++r){var n=e[r];if(n.marker==t)return n}}function hr(e,t){for(var r,n=0;e.length>n;++n)e[n]!=t&&(r||(r=[])).push(e[n]);return r}function fr(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function dr(e,t){if(e)for(var r,n=0;e.length>n;++n){var i=e[n],o=i.marker,l=null==i.from||(o.inclusiveLeft?t>=i.from:t>i.from);if(l||"bookmark"==o.type&&i.from==t){var s=null==i.to||(o.inclusiveRight?i.to>=t:i.to>t);(r||(r=[])).push({from:i.from,to:s?null:i.to,marker:o})}}return r}function pr(e,t,r){if(e)for(var n,i=0;e.length>i;++i){var o=e[i],l=o.marker,s=null==o.to||(l.inclusiveRight?o.to>=r:o.to>r);if(s||"bookmark"==l.type&&o.from==r&&o.from!=t){var a=null==o.from||(l.inclusiveLeft?r>=o.from:r>o.from);(n||(n=[])).push({from:a?null:o.from-r,to:null==o.to?null:o.to-r,marker:l})}}return n}function mr(e,t){var r=Rt(e,t.from.line)&&_r(e,t.from.line).markedSpans,n=Rt(e,t.to.line)&&_r(e,t.to.line).markedSpans;if(!r&&!n)return null;var i=t.from.ch,o=t.to.ch,l=dr(r,i),s=pr(n,t.from.line==t.to.line?i:0/0,o),a=1==t.text.length,u=zn(t.text).length+(a?i:0);if(l)for(var c=0;l.length>c;++c){var h=l[c];if(null==h.to){var f=cr(s,h.marker);f?a&&(h.to=null==f.to?null:f.to+u):h.to=i}}if(s)for(var c=0;s.length>c;++c){var h=s[c];if(null!=h.to&&(h.to+=u),null==h.from){var f=cr(l,h.marker);f||(h.from=u,a&&(l||(l=[])).push(h))}else h.from+=u,a&&(l||(l=[])).push(h)}var d=[l];if(!a){var p,m=t.text.length-2;if(m>0&&l)for(var c=0;l.length>c;++c)null==l[c].to&&(p||(p=[])).push({from:null,to:null,marker:l[c].marker});for(var c=0;m>c;++c)d.push(p);d.push(s)}return d}function vr(e,t){var r=an(e,t),n=mr(e,t);if(!r)return n;if(!n)return r;for(var i=0;r.length>i;++i){var o=r[i],l=n[i];if(o&&l)e:for(var s=0;l.length>s;++s){for(var a=l[s],u=0;o.length>u;++u)if(o[u].marker==a.marker)continue e;o.push(a)}else l&&(r[i]=l)}return r}function gr(e,t,r){var n=null;if(e.iter(t.line,r.line+1,function(e){if(e.markedSpans)for(var t=0;e.markedSpans.length>t;++t){var r=e.markedSpans[t].marker;!r.readOnly||n&&-1!=Dn(n,r)||(n||(n=[])).push(r)}}),!n)return null;for(var i=[{from:t,to:r}],o=0;n.length>o;++o)for(var l=n[o].find(),s=0;i.length>s;++s){var a=i[s];if(Ot(l.from,a.to)&&!Ot(l.to,a.from)){var u=[s,1];Ot(a.from,l.from)&&u.push({from:a.from,to:l.from}),Ot(l.to,a.to)&&u.push({from:l.to,to:a.to}),i.splice.apply(i,u),s+=u.length-1}}return i}function yr(e,t){var r,n=Ci&&e.markedSpans;if(n)for(var i,o=0;n.length>o;++o)i=n[o],i.marker.collapsed&&(null==i.from||t>i.from)&&(null==i.to||i.to>t)&&(!r||r.width<i.marker.width)&&(r=i.marker);return r}function br(e){return yr(e,-1)}function kr(e){return yr(e,e.text.length+1)}function xr(e,t){for(var r;r=br(t);)t=_r(e,r.find().from.line);return t}function Cr(e){var t=Ci&&e.markedSpans;if(t)for(var r,n=0;t.length>n;++n)if(r=t[n],r.marker.collapsed){if(null==r.from)return!0;if(0==r.from&&r.marker.inclusiveLeft&&Lr(e,r))return!0}}function Lr(e,t){if(null==t.to){var r=t.marker.find().to,n=_r(Jr(e),r.line);return Lr(n,cr(n.markedSpans,t.marker))}if(t.marker.inclusiveRight&&t.to==e.text.length)return!0;for(var i,o=0;e.markedSpans.length>o;++o)if(i=e.markedSpans[o],i.marker.collapsed&&i.from==t.to&&(i.marker.inclusiveLeft||t.marker.inclusiveRight)&&Lr(e,i))return!0}function wr(e){var t=e.markedSpans;if(t){for(var r=0;t.length>r;++r)t[r].marker.detachLine(e);e.markedSpans=null}}function Sr(e,t){if(t){for(var r=0;t.length>r;++r)t[r].marker.attachLine(e);e.markedSpans=t}}function Tr(e){return function(){var t=!this.cm.curOp;t&&j(this.cm);try{var r=e.apply(this,arguments)}finally{t&&$(this.cm)}return r}}function Mr(e){return null!=e.height?e.height:(e.node.parentNode&&1==e.node.parentNode.nodeType||Pn(e.cm.display.measure,Fn("div",[e.node],null,"position: relative")),e.height=e.node.offsetHeight)}function Er(e,t,r,n){var i=new Bi(e,r,n);return i.noHScroll&&(e.display.alignWidgets=!0),$t(e,t,function(t){if((t.widgets||(t.widgets=[])).push(i),i.line=t,!Cr(t)||i.showIfHidden){var r=en(e,t)<e.display.scroller.scrollTop;Zr(t,t.height+Mr(i)),r&&(e.curOp.updateScrollPos={scrollTop:e.doc.scrollTop+i.height,scrollLeft:e.doc.scrollLeft})}return!0}),i}function zr(e,t,r){var n={text:e};return Sr(n,t),n.height=r?r(n):1,n}function Nr(e,t,r,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),wr(e),Sr(e,r);var i=n?n(e):1;i!=e.height&&Zr(e,i),wn(e,"change")}function Dr(e){e.parent=null,wr(e)}function Ar(e,t,r,n,i){var o=e.options.flattenSpans,l="",s=null,a=new or(t,e.options.tabSize);for(""==t&&r.blankLine&&r.blankLine(n);!a.eol();){var u=r.token(a,n);a.pos>5e3&&(o=!1,a.pos=Math.min(t.length,a.start+5e4),u=null);var c=a.current();a.start=a.pos,o&&s==u?l+=c:(l&&i(l,s),l=c,s=u)}l&&i(l,s)}function Wr(e,t,r){var n=[e.state.modeGen];Ar(e,t.text,e.doc.mode,r,function(e,t){n.push(e,t)});for(var i=0;e.state.overlays.length>i;++i){var o=e.state.overlays[i],l=1;Ar(e,t.text,o.mode,!0,function(e,t){for(var r=l,i=e.length;i;){var s=n[l],a=s.length;i>=a?i-=a:(n.splice(l,1,s.slice(0,i),n[l+1],s.slice(i)),i=0),l+=2}if(t)if(o.opaque)n.splice(r,l-r,e,t),l=r+2;else for(;l>r;r+=2){var s=n[r+1];n[r+1]=s?s+" "+t:t}})}return n}function Hr(e,t){return t.styles&&t.styles[0]==e.state.modeGen||(t.styles=Wr(e,t,t.stateAfter=H(e,qr(t)))),t.styles}function Or(e,t,r){var n=e.doc.mode,i=new or(t.text,e.options.tabSize);for(""==t.text&&n.blankLine&&n.blankLine(r);!i.eol()&&5e3>=i.pos;)n.token(i,r),i.start=i.pos}function Ir(e){return e?Fi[e]||(Fi[e]="cm-"+e.replace(/ +/g," cm-")):null}function Br(e,t,r){for(var n,i,o,l=t,s=!0;n=br(l);)s=!1,l=_r(e.doc,n.find().from.line),i||(i=l);var a={pre:Fn("pre"),col:0,pos:0,display:!r,measure:null,addedOne:!1,cm:e};l.textClass&&(a.pre.className=l.textClass);do{a.measure=l==t&&r,a.pos=0,a.addToken=a.measure?Rr:Fr,r&&o&&l!=t&&!a.addedOne&&(r[0]=a.pre.appendChild(Un(e.display.measure)),a.addedOne=!0);var u=Vr(l,a,Hr(e,l));o=l==i,u&&(l=_r(e.doc,u.to.line),s=!1)}while(u);return r&&!a.addedOne&&(r[0]=a.pre.appendChild(s?Fn("span"," "):Un(e.display.measure))),a.pre.firstChild||Cr(t)||a.pre.appendChild(document.createTextNode(" ")),a.pre}function Fr(e,t,r,n,i){if(t){if(Ri.test(t))for(var o=document.createDocumentFragment(),l=0;;){Ri.lastIndex=l;var s=Ri.exec(t),a=s?s.index-l:t.length-l;if(a&&(o.appendChild(document.createTextNode(t.slice(l,l+a))),e.col+=a),!s)break;if(l+=a+1,"	"==s[0]){var u=e.cm.options.tabSize,c=u-e.col%u;o.appendChild(Fn("span",En(c),"cm-tab")),e.col+=c}else{var h=Fn("span","•","cm-invalidchar");h.title="\\u"+s[0].charCodeAt(0).toString(16),o.appendChild(h),e.col+=1}}else{e.col+=t.length;var o=document.createTextNode(t)}if(r||n||i||e.measure){var f=r||"";return n&&(f+=n),i&&(f+=i),e.pre.appendChild(Fn("span",[o],f))}e.pre.appendChild(o)}}function Rr(e,t,r,n,i){for(var o=0;t.length>o;++o)o&&t.length>o&&e.cm.options.lineWrapping&&Ji.test(t.slice(o-1,o+1))&&e.pre.appendChild(Fn("wbr")),e.measure[e.pos++]=Fr(e,t.charAt(o),r,0==o&&n,o==t.length-1&&i);t.length&&(e.addedOne=!0)}function Pr(e,t,r){r&&(e.display||(r=r.cloneNode(!0)),e.pre.appendChild(r),e.measure&&t&&(e.measure[e.pos]=r,e.addedOne=!0)),e.pos+=t}function Vr(e,t,r){var n=e.markedSpans;if(n)for(var i,o,l,s,a,u=e.text,c=u.length,h=0,f=1,d="",p=0;;){if(p==h){o=l=s="",a=null,p=1/0;for(var m=null,v=0;n.length>v;++v){var g=n[v],y=g.marker;h>=g.from&&(null==g.to||g.to>h)?(null!=g.to&&p>g.to&&(p=g.to,l=""),y.className&&(o+=" "+y.className),y.startStyle&&g.from==h&&(s+=" "+y.startStyle),y.endStyle&&g.to==p&&(l+=" "+y.endStyle),y.collapsed&&(!a||a.marker.width<y.width)&&(a=g)):g.from>h&&p>g.from&&(p=g.from),"bookmark"==y.type&&g.from==h&&y.replacedWith&&(m=y.replacedWith)}if(a&&(a.from||0)==h&&(Pr(t,(null==a.to?c:a.to)-h,null!=a.from&&a.marker.replacedWith),null==a.to))return a.marker.find();m&&!a&&Pr(t,0,m)}if(h>=c)break;for(var b=Math.min(c,p);;){if(d){var k=h+d.length;if(!a){var x=k>b?d.slice(0,b-h):d;t.addToken(t,x,i+o,s,h+x.length==p?l:"")}if(k>=b){d=d.slice(b-h),h=b;break}h=k,s=""}d=r[f++],i=Ir(r[f++])}}else for(var f=1;r.length>f;f+=2)t.addToken(t,r[f],Ir(r[f+1]))}function Kr(e,t,r,n,i){function o(e){return r?r[e]:null}var l=t.from,s=t.to,a=t.text,u=_r(e,l.line),c=_r(e,s.line),h=zn(a),f=o(a.length-1),d=s.line-l.line;if(0==l.ch&&0==s.ch&&""==h){for(var p=0,m=a.length-1,v=[];m>p;++p)v.push(zr(a[p],o(p),i));Nr(c,c.text,f,i),d&&e.remove(l.line,d),v.length&&e.insert(l.line,v)}else if(u==c)if(1==a.length)Nr(u,u.text.slice(0,l.ch)+h+u.text.slice(s.ch),f,i);else{for(var v=[],p=1,m=a.length-1;m>p;++p)v.push(zr(a[p],o(p),i));v.push(zr(h+u.text.slice(s.ch),f,i)),Nr(u,u.text.slice(0,l.ch)+a[0],o(0),i),e.insert(l.line+1,v)}else if(1==a.length)Nr(u,u.text.slice(0,l.ch)+a[0]+c.text.slice(s.ch),o(0),i),e.remove(l.line+1,d);else{Nr(u,u.text.slice(0,l.ch)+a[0],o(0),i),Nr(c,h+c.text.slice(s.ch),f,i);for(var p=1,m=a.length-1,v=[];m>p;++p)v.push(zr(a[p],o(p),i));d>1&&e.remove(l.line+1,d-1),e.insert(l.line+1,v)}Vt(e,n.anchor,n.head,null,!0)}function Ur(e){this.lines=e,this.parent=null;for(var t=0,r=e.length,n=0;r>t;++t)e[t].parent=this,n+=e[t].height;this.height=n}function Gr(e){this.children=e;for(var t=0,r=0,n=0,i=e.length;i>n;++n){var o=e[n];t+=o.chunkSize(),r+=o.height,o.parent=this}this.size=t,this.height=r,this.parent=null}function Xr(e,t,r){function n(e,i,o){if(e.linked)for(var l=0;e.linked.length>l;++l){var s=e.linked[l];if(s.doc!=i){var a=o&&s.sharedHist;(!r||a)&&(t(s.doc,a),n(s.doc,e,a))}}}n(e,null,!0)}function Yr(e,t){if(t.cm)throw Error("This document is already in use.");e.doc=t,t.cm=e,o(e),r(e),e.options.lineWrapping||h(e),e.options.mode=t.modeOption,Q(e)}function _r(e,t){for(t-=e.first;!e.lines;)for(var r=0;;++r){var n=e.children[r],i=n.chunkSize();if(i>t){e=n;break}t-=i}return e.lines[t]}function jr(e,t,r){var n=[],i=t.line;return e.iter(t.line,r.line+1,function(e){var o=e.text;i==r.line&&(o=o.slice(0,r.ch)),i==t.line&&(o=o.slice(t.ch)),n.push(o),++i}),n}function $r(e,t,r){var n=[];return e.iter(t,r,function(e){n.push(e.text)}),n}function Zr(e,t){for(var r=t-e.height,n=e;n;n=n.parent)n.height+=r}function qr(e){if(null==e.parent)return null;for(var t=e.parent,r=Dn(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var i=0;n.children[i]!=t;++i)r+=n.children[i].chunkSize();return r+t.first}function Jr(e){for(var t=e.parent;t.parent;t=t.parent);return t}function Qr(e,t){var r=e.first;e:do{for(var n=0,i=e.children.length;i>n;++n){var o=e.children[n],l=o.height;if(l>t){e=o;continue e}t-=l,r+=o.chunkSize()}return r}while(!e.lines);for(var n=0,i=e.lines.length;i>n;++n){var s=e.lines[n],a=s.height;if(a>t)break;t-=a}return r+n}function en(e,t){t=xr(e.doc,t);for(var r=0,n=t.parent,i=0;n.lines.length>i;++i){var o=n.lines[i];if(o==t)break;r+=o.height}for(var l=n.parent;l;n=l,l=n.parent)for(var i=0;l.children.length>i;++i){var s=l.children[i];if(s==n)break;r+=s.height}return r}function tn(e){var t=e.order;return null==t&&(t=e.order=oo(e.text)),t}function rn(){return{done:[],undone:[],undoDepth:1/0,lastTime:0,lastOp:null,lastOrigin:null,dirtyCounter:0}}function nn(e,t,r,n){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,r),Math.min(e.first+e.size,n),function(r){r.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=r.markedSpans),++o})}function on(e,t){var r={from:t.from,to:St(t),text:jr(e,t.from,t.to)};return nn(e,r,t.from.line,t.to.line+1),Xr(e,function(e){nn(e,r,t.from.line,t.to.line+1)},!0),r}function ln(e,t,r,n){var i=e.history;i.undone.length=0;var o=+new Date,l=zn(i.done);if(l&&(i.lastOp==n||i.lastOrigin==t.origin&&("input"==t.origin||"delete"==t.origin)&&i.lastTime>o-600)){var s=zn(l.changes);Ht(t.from,t.to)&&Ht(t.from,s.to)?s.to=St(t):l.changes.push(on(e,t)),l.anchorAfter=r.anchor,l.headAfter=r.head}else{for(l={changes:[on(e,t)],anchorBefore:e.sel.anchor,headBefore:e.sel.head,anchorAfter:r.anchor,headAfter:r.head},i.done.push(l);i.done.length>i.undoDepth;)i.done.shift();0>i.dirtyCounter?i.dirtyCounter=0/0:i.dirtyCounter++}i.lastTime=o,i.lastOp=n,i.lastOrigin=t.origin}function sn(e){if(!e)return null;for(var t,r=0;e.length>r;++r)e[r].marker.explicitlyCleared?t||(t=e.slice(0,r)):t&&t.push(e[r]);return t?t.length?t:null:e}function an(e,t){var r=t["spans_"+e.id];if(!r)return null;for(var n=0,i=[];t.text.length>n;++n)i.push(sn(r[n]));return i}function un(e,t){for(var r=0,n=[];e.length>r;++r){var i=e[r],o=i.changes,l=[];n.push({changes:l,anchorBefore:i.anchorBefore,headBefore:i.headBefore,anchorAfter:i.anchorAfter,headAfter:i.headAfter});for(var s=0;o.length>s;++s){var a,u=o[s];if(l.push({from:u.from,to:u.to,text:u.text}),t)for(var c in u)(a=c.match(/^spans_(\d+)$/))&&Dn(t,Number(a[1]))>-1&&(zn(l)[c]=u[c],delete u[c])}}return n}function cn(e,t,r,n){e.line>r?e.line+=n:e.line>t&&(e.line=t,e.ch=0)}function hn(e,t,r,n){for(var i=0;e.length>i;++i){for(var o=e[i],l=!0,s=0;o.changes.length>s;++s){var a=o.changes[s];if(o.copied||(a.from=It(a.from),a.to=It(a.to)),a.from.line>r)a.from.line+=n,a.to.line+=n;else if(a.to.line>=t){l=!1;break}}o.copied||(o.anchorBefore=It(o.anchorBefore),o.headBefore=It(o.headBefore),o.anchorAfter=It(o.anchorAfter),o.readAfter=It(o.headAfter),o.copied=!0),l?(cn(o.anchorBefore),cn(o.headBefore),cn(o.anchorAfter),cn(o.headAfter)):(e.splice(0,i+1),i=0)}}function fn(e,t){var r=t.from.line,n=t.to.line,i=t.text.length-(n-r)-1;hn(e.done,r,n,i),hn(e.undone,r,n,i)}function dn(){gn(this)}function pn(e){return e.stop||(e.stop=dn),e}function mn(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function vn(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function gn(e){mn(e),vn(e)}function yn(e){return e.target||e.srcElement}function bn(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),pi&&e.ctrlKey&&1==t&&(t=3),t}function kn(e,t){var r=e.override&&e.override.hasOwnProperty(t);return r?e.override[t]:e[t]}function xn(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var n=e._handlers||(e._handlers={}),i=n[t]||(n[t]=[]);i.push(r)}}function Cn(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent("on"+t,r);else{var n=e._handlers&&e._handlers[t];if(!n)return;for(var i=0;n.length>i;++i)if(n[i]==r){n.splice(i,1);break}}}function Ln(e,t){var r=e._handlers&&e._handlers[t];if(r)for(var n=Array.prototype.slice.call(arguments,2),i=0;r.length>i;++i)r[i].apply(null,n)}function wn(e,t){function r(e){return function(){e.apply(null,i)}}var n=e._handlers&&e._handlers[t];if(n)for(var i=Array.prototype.slice.call(arguments,2),o=0;n.length>o;++o)Gi?Gi.push(r(n[o])):n[o].apply(null,i)}function Sn(e,t){var r=e._handlers&&e._handlers[t];return r&&r.length>0}function Tn(){this.id=null}function Mn(e,t,r){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var n=0,i=0;t>n;++n)"	"==e.charAt(n)?i+=r-i%r:++i;return i}function En(e){for(;e>=ji.length;)ji.push(zn(ji)+" ");return ji[e]}function zn(e){return e[e.length-1]}function Nn(e){fi?(e.selectionStart=0,e.selectionEnd=e.value.length):e.select()}function Dn(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;n>r;++r)if(e[r]==t)return r;return-1}function An(e,t){if(e){An.prototype=e;var r=new An;return t&&Wn(t,r),r}}function Wn(e,t){t||(t={});for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function Hn(e){for(var t=[],r=0;e>r;++r)t.push(void 0);return t}function On(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function In(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||$i.test(e))}function Bn(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function Fn(e,t,r,n){var i=document.createElement(e);if(r&&(i.className=r),n&&(i.style.cssText=n),"string"==typeof t)Vn(i,t);else if(t)for(var o=0;t.length>o;++o)i.appendChild(t[o]);return i}function Rn(e){if(ei)for(;e.firstChild;)e.removeChild(e.firstChild);else e.innerHTML="";return e}function Pn(e,t){return Rn(e).appendChild(t)}function Vn(e,t){ri?(e.innerHTML="",e.appendChild(document.createTextNode(t))):e.textContent=t}function Kn(e){if(null!=Qi)return Qi;var t=Fn("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return Pn(e,t),t.offsetWidth&&(Qi=t.offsetHeight-t.clientHeight),Qi||0}function Un(e){if(null==eo){var t=Fn("span","​");Pn(e,Fn("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(eo=1>=t.offsetWidth&&t.offsetHeight>2&&!ti)}return eo?Fn("span","​"):Fn("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function Gn(e,t,r,n){if(!e)return n(t,r,"ltr");for(var i=0;e.length>i;++i){var o=e[i];(r>o.from&&o.to>t||t==r&&o.to==t)&&n(Math.max(o.from,t),Math.min(o.to,r),1==o.level?"rtl":"ltr")}}function Xn(e){return e.level%2?e.to:e.from}function Yn(e){return e.level%2?e.from:e.to}function _n(e){var t=tn(e);return t?Xn(t[0]):0}function jn(e){var t=tn(e);return t?Yn(zn(t)):e.text.length}function $n(e,t){var r=_r(e.doc,t),n=xr(e.doc,r);n!=r&&(t=qr(n));var i=tn(n),o=i?i[0].level%2?jn(n):_n(n):0;return{line:t,ch:o}}function Zn(e,t){for(var r,n;r=kr(n=_r(e.doc,t));)t=r.find().to.line;var i=tn(n),o=i?i[0].level%2?_n(n):jn(n):n.text.length;return{line:t,ch:o}}function qn(e,t,r,n){var i=tn(e);if(!i)return Jn(e,t,r,n);for(var o=n?function(t,r){do t+=r;while(t>0&&Zi.test(e.text.charAt(t)));return t}:function(e,t){return e+t},l=i[0].level,s=0;i.length>s;++s){var a=i[s],u=a.level%2==l;if(t>a.from&&a.to>t||u&&(a.from==t||a.to==t))break}for(var c=o(t,a.level%2?-r:r);null!=c;)if(a.level%2==l){if(!(a.from>c||c>a.to))break;a=i[s+=r],c=a&&(r>0==a.level%2?o(a.to,-1):o(a.from,1))}else if(c==Xn(a))a=i[--s],c=a&&Yn(a);else{if(c!=Yn(a))break;a=i[++s],c=a&&Xn(a)}return 0>c||c>e.text.length?null:c}function Jn(e,t,r,n){var i=t+r;if(n)for(;i>0&&Zi.test(e.text.charAt(i));)i+=r;return 0>i||i>e.text.length?null:i}var Qn=/gecko\/\d/i.test(navigator.userAgent),ei=/MSIE \d/.test(navigator.userAgent),ti=ei&&(null==document.documentMode||8>document.documentMode),ri=ei&&(null==document.documentMode||9>document.documentMode),ni=/WebKit\//.test(navigator.userAgent),ii=ni&&/Qt\/\d+\.\d+/.test(navigator.userAgent),oi=/Chrome\//.test(navigator.userAgent),li=/Opera\//.test(navigator.userAgent),si=/Apple Computer/.test(navigator.vendor),ai=/KHTML\//.test(navigator.userAgent),ui=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),ci=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),hi=/PhantomJS/.test(navigator.userAgent),fi=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),di=fi||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),pi=fi||/Mac/.test(navigator.platform),mi=/windows/i.test(navigator.platform),vi=li&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);
vi&&(vi=Number(vi[1]));var gi,yi,bi,ki=pi&&(ii||li&&(null==vi||12.11>vi)),xi=!1,Ci=!1,Li=0,wi=null;ei?wi=-.53:Qn?wi=15:oi?wi=-.7:si&&(wi=-1/3);var Si,Ti,Mi=null;e.prototype={focus:function(){window.focus(),it(this),Ct(this),tt(this)},setOption:function(e,t){var r=this.options,n=r[e];(r[e]!=t||"mode"==e)&&(r[e]=t,Ei.hasOwnProperty(e)&&Z(this,Ei[e])(this,t,n))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e){this.state.keyMaps.push(e)},removeKeyMap:function(e){for(var t=this.state.keyMaps,r=0;t.length>r;++r)if(("string"==typeof e?t[r].name:t[r])==e)return t.splice(r,1),!0},addOverlay:Z(null,function(t,r){var n=t.token?t:e.getMode(this.options,t);if(n.startState)throw Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:t,opaque:r&&r.opaque}),this.state.modeGen++,Q(this)}),removeOverlay:Z(null,function(e){for(var t=this.state.overlays,r=0;t.length>r;++r)if(t[r].modeSpec==e)return t.splice(r,1),this.state.modeGen++,Q(this),void 0}),indentLine:Z(null,function(e,t,r){"string"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Rt(this.doc,e)&&jt(this,e,t,r)}),indentSelection:Z(null,function(e){var t=this.doc.sel;if(Ht(t.from,t.to))return jt(this,t.from.line,e);for(var r=t.to.line-(t.to.ch?0:1),n=t.from.line;r>=n;++n)jt(this,n,e)}),getTokenAt:function(e){var t=this.doc;e=Ft(t,e);for(var r=H(this,e.line),n=this.doc.mode,i=_r(t,e.line),o=new or(i.text,this.options.tabSize);o.pos<e.ch&&!o.eol();){o.start=o.pos;var l=n.token(o,r)}return{start:o.start,end:o.pos,string:o.current(),className:l||null,type:l||null,state:r}},getStateAfter:function(e){var t=this.doc;return e=Bt(t,null==e?t.first+t.size-1:e),H(this,e+1)},cursorCoords:function(e,t){var r,n=this.doc.sel;return r=null==e?n.head:"object"==typeof e?Ft(this.doc,e):e?n.from:n.to,U(this,r,t||"page")},charCoords:function(e,t){return K(this,Ft(this.doc,e),t||"page")},coordsChar:function(e){var t=this.display.lineSpace.getBoundingClientRect();return G(this,e.left-t.left,e.top-t.top)},defaultTextHeight:function(){return Y(this.display)},setGutterMarker:Z(null,function(e,t,r){return $t(this,e,function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=r,!r&&Bn(n)&&(e.gutterMarkers=null),!0})}),clearGutter:Z(null,function(e){var t=this,r=t.doc,n=r.first;r.iter(function(r){r.gutterMarkers&&r.gutterMarkers[e]&&(r.gutterMarkers[e]=null,Q(t,n,n+1),Bn(r.gutterMarkers)&&(r.gutterMarkers=null)),++n})}),addLineClass:Z(null,function(e,t,r){return $t(this,e,function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"wrapClass";if(e[n]){if(RegExp("\\b"+r+"\\b").test(e[n]))return!1;e[n]+=" "+r}else e[n]=r;return!0})}),removeLineClass:Z(null,function(e,t,r){return $t(this,e,function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"wrapClass",i=e[n];if(!i)return!1;if(null==r)e[n]=null;else{var o=i.replace(RegExp("^"+r+"\\b\\s*|\\s*\\b"+r+"\\b"),"");if(o==i)return!1;e[n]=o||null}return!0})}),addLineWidget:Z(null,function(e,t,r){return Er(this,e,t,r)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if("number"==typeof e){if(!Rt(this.doc,e))return null;var t=e;if(e=_r(this.doc,e),!e)return null}else{var t=qr(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(e,t,r,n,i){var o=this.display;e=U(this,Ft(this.doc,e));var l=e.top,s=e.left;if(t.style.position="absolute",o.sizer.appendChild(t),"over"==n)l=e.top;else if("near"==n){var a=Math.max(o.wrapper.clientHeight,this.doc.height),u=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);e.bottom+t.offsetHeight>a&&e.top>t.offsetHeight&&(l=e.top-t.offsetHeight),s+t.offsetWidth>u&&(s=u-t.offsetWidth)}t.style.top=l+O(o)+"px",t.style.left=t.style.right="","right"==i?(s=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),r&&Yt(this,s,l,s+t.offsetWidth,l+t.offsetHeight)},triggerOnKeyDown:Z(null,kt),execCommand:function(e){return Oi[e](this)},moveH:Z(null,function(e,t){var r=this.doc.sel,n=0>e?r.from:r.to;(r.shift||r.extend||Ht(r.from,r.to))&&(n=Zt(this.doc,e,t,this.options.rtlMoveVisually)),Pt(this.doc,n,n,e)}),deleteH:Z(null,function(e,t){var r=this.doc.sel;Ht(r.from,r.to)?Wt(this.doc,"",r.from,Zt(this.doc,e,t,!1),"delete"):Wt(this.doc,"",r.from,r.to,"delete"),this.curOp.userSelChange=!0}),moveV:Z(null,function(e,t){var r,n=this.doc,i=this.display,o=n.sel.head,l=U(this,o,"div"),s=l.left;if(null!=n.sel.goalColumn&&(s=n.sel.goalColumn),"page"==t){var a=Math.min(i.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);r=l.top+e*a}else"line"==t&&(r=e>0?l.bottom+3:l.top-3);do{var u=G(this,s,r);r+=5*e}while(u.outside&&(0>e?r>0:n.height>r));"page"==t&&(i.scrollbarV.scrollTop+=K(this,u,"div").top-l.top),Pt(this.doc,u,u,e),n.sel.goalColumn=s}),toggleOverwrite:function(){(this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},scrollTo:function(e,t){null!=e&&(this.display.scrollbarH.scrollLeft=this.display.scroller.scrollLeft=e),null!=t&&(this.display.scrollbarV.scrollTop=this.display.scroller.scrollTop=t),b(this,[])},getScrollInfo:function(){var e=this.display.scroller,t=Yi;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:function(e){"number"==typeof e&&(e={line:e,ch:0}),e&&null==e.line?Yt(this,e.left,e.top,e.right,e.bottom):(e=e?Ft(this.doc,e):this.doc.sel.head,Xt(this,e))},setSize:function(e,t){function r(e){return"number"==typeof e||/^\d+$/.test(e+"")?e+"px":e}null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.refresh()},on:function(e,t){xn(this,e,t)},off:function(e,t){Cn(this,e,t)},operation:function(e){return J(this,e)},refresh:Z(null,function(){P(this),this.curOp.updateScrollPos={scrollTop:this.doc.scrollTop,scrollLeft:this.doc.scrollLeft},Q(this)}),swapDoc:Z(null,function(e){var t=this.doc;return t.cm=null,Yr(this,e),P(this),this.curOp.updateScrollPos={scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var Ei=e.optionHandlers={},zi=e.defaults={},Ni=e.Init={toString:function(){return"CodeMirror.Init"}};Qt("value","",function(e,t){e.setValue(t)},!0),Qt("mode",null,function(e,t){e.doc.modeOption=t,r(e)},!0),Qt("indentUnit",2,r,!0),Qt("indentWithTabs",!1),Qt("smartIndent",!0),Qt("tabSize",4,function(e){r(e),P(e),Q(e)},!0),Qt("electricChars",!0),Qt("rtlMoveVisually",!mi),Qt("theme","default",function(e){s(e),a(e)},!0),Qt("keyMap","default",l),Qt("extraKeys",null),Qt("onKeyEvent",null),Qt("onDragEvent",null),Qt("lineWrapping",!1,n,!0),Qt("gutters",[],function(e){f(e.options),a(e)},!0),Qt("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?y(e.display)+"px":"0",e.refresh()},!0),Qt("lineNumbers",!1,function(e){f(e.options),a(e)},!0),Qt("firstLineNumber",1,a,!0),Qt("lineNumberFormatter",function(e){return e},a,!0),Qt("showCursorWhenSelecting",!1,M,!0),Qt("readOnly",!1,function(e,t){"nocursor"==t?(Lt(e),e.display.input.blur()):t||nt(e,!0)}),Qt("dragDrop",!0),Qt("cursorBlinkRate",530),Qt("cursorHeight",1),Qt("workTime",100),Qt("workDelay",100),Qt("flattenSpans",!0),Qt("pollInterval",100),Qt("undoDepth",40,function(e,t){e.doc.history.undoDepth=t}),Qt("viewportMargin",10,function(e){e.refresh()},!0),Qt("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),Qt("autofocus",null);var Di=e.modes={},Ai=e.mimeModes={};e.defineMode=function(t,r){if(e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2){r.dependencies=[];for(var n=2;arguments.length>n;++n)r.dependencies.push(arguments[n])}Di[t]=r},e.defineMIME=function(e,t){Ai[e]=t},e.resolveMode=function(t){if("string"==typeof t&&Ai.hasOwnProperty(t))t=Ai[t];else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,r){r=e.resolveMode(r);var n=Di[r.name];if(!n)return e.getMode(t,"text/plain");var i=n(t,r);if(Wi.hasOwnProperty(r.name)){var o=Wi[r.name];for(var l in o)o.hasOwnProperty(l)&&(i.hasOwnProperty(l)&&(i["_"+l]=i[l]),i[l]=o[l])}return i.name=r.name,i},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var Wi=e.modeExtensions={};e.extendMode=function(e,t){var r=Wi.hasOwnProperty(e)?Wi[e]:Wi[e]={};Wn(t,r)},e.defineExtension=function(t,r){e.prototype[t]=r},e.defineOption=Qt;var Hi=[];e.defineInitHook=function(e){Hi.push(e)},e.copyState=er,e.startState=tr,e.innerMode=function(e,t){for(;e.innerMode;){var r=e.innerMode(t);t=r.state,e=r.mode}return r||{mode:e,state:t}};var Oi=e.commands={selectAll:function(e){e.setSelection({line:e.firstLine(),ch:0},{line:e.lastLine()})},killLine:function(e){var t=e.getCursor(!0),r=e.getCursor(!1),n=!Ht(t,r);n||e.getLine(t.line).length!=t.ch?e.replaceRange("",t,n?r:{line:t.line},"delete"):e.replaceRange("",t,{line:t.line+1,ch:0},"delete")},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",{line:t,ch:0},{line:t},"delete")},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.extendSelection({line:e.firstLine(),ch:0})},goDocEnd:function(e){e.extendSelection({line:e.lastLine()})},goLineStart:function(e){e.extendSelection($n(e,e.getCursor().line))},goLineStartSmart:function(e){var t=e.getCursor(),r=$n(e,t.line),n=e.getLineHandle(r.line),i=tn(n);if(i&&0!=i[0].level)e.extendSelection(r);else{var o=Math.max(0,n.text.search(/\S/)),l=t.line==r.line&&o>=t.ch&&t.ch;e.extendSelection({line:r.line,ch:l?0:o})}},goLineEnd:function(e){e.extendSelection(Zn(e,e.getCursor().line))},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end","input")},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection("	","end","input")},transposeChars:function(e){var t=e.getCursor(),r=e.getLine(t.line);t.ch>0&&t.ch<r.length-1&&e.replaceRange(r.charAt(t.ch)+r.charAt(t.ch-1),{line:t.line,ch:t.ch-1},{line:t.line,ch:t.ch+1})},newlineAndIndent:function(e){Z(e,function(){e.replaceSelection("\n","end","input"),e.indentLine(e.getCursor().line,null,!0)})()},toggleOverwrite:function(e){e.toggleOverwrite()}},Ii=e.keyMap={};Ii.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},Ii.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordBefore","Ctrl-Delete":"delWordAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},Ii.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordBefore","Ctrl-Alt-Backspace":"delWordAfter","Alt-Delete":"delWordAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},Ii["default"]=pi?Ii.macDefault:Ii.pcDefault,Ii.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},e.isModifierKey=ir,e.fromTextArea=function(t,r){function n(){t.value=u.getValue()}if(r||(r={}),r.value=t.value,!r.tabindex&&t.tabindex&&(r.tabindex=t.tabindex),null==r.autofocus){var i=document.body;try{i=document.activeElement}catch(o){}r.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}if(t.form){xn(t.form,"submit",n);var l=t.form,s=l.submit;try{l.submit=function a(){n(),l.submit=s,l.submit(),l.submit=a}}catch(o){}}t.style.display="none";var u=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},r);return u.save=n,u.getTextArea=function(){return t},u.toTextArea=function(){n(),t.parentNode.removeChild(u.getWrapperElement()),t.style.display="",t.form&&(Cn(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=s))},u},or.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var r=t==e;else var r=t&&(e.test?e.test(t):e(t));return r?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return Mn(this.string,this.start,this.tabSize)},indentation:function(){return Mn(this.string,null,this.tabSize)},match:function(e,t,r){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&t!==!1&&(this.pos+=n[0].length),n)}var i=function(e){return r?e.toLowerCase():e};return i(this.string).indexOf(i(e),this.pos)==this.pos?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},e.StringStream=or,e.TextMarker=lr,lr.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;t&&j(e);for(var r=null,n=null,i=0;this.lines.length>i;++i){var o=this.lines[i],l=cr(o.markedSpans,this);null!=l.to&&(n=qr(o)),o.markedSpans=hr(o.markedSpans,l),null!=l.from?r=qr(o):this.collapsed&&!Cr(o)&&e&&Zr(o,Y(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var i=0;this.lines.length>i;++i){var s=xr(e.doc,this.lines[i]),a=c(e.doc,s);a>e.display.maxLineLength&&(e.display.maxLine=s,e.display.maxLineLength=a,e.display.maxLineChanged=!0)}null!=r&&e&&Q(e,r,n+1),this.lines.length=0,this.explicitlyCleared=!0,this.collapsed&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Kt(e)),t&&$(e),wn(this,"clear")}},lr.prototype.find=function(){for(var e,t,r=0;this.lines.length>r;++r){var n=this.lines[r],i=cr(n.markedSpans,this);if(null!=i.from||null!=i.to){var o=qr(n);null!=i.from&&(e={line:o,ch:i.from}),null!=i.to&&(t={line:o,ch:i.to})}}return"bookmark"==this.type?e:e&&{from:e,to:t}},lr.prototype.getOptions=function(e){var t=this.replacedWith;return{className:this.className,inclusiveLeft:this.inclusiveLeft,inclusiveRight:this.inclusiveRight,atomic:this.atomic,collapsed:this.collapsed,clearOnEnter:this.clearOnEnter,replacedWith:e?t&&t.cloneNode(!0):t,readOnly:this.readOnly,startStyle:this.startStyle,endStyle:this.endStyle}},lr.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=Dn(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},lr.prototype.detachLine=function(e){if(this.lines.splice(Dn(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},e.SharedTextMarker=ar,ar.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;this.markers.length>e;++e)this.markers[e].clear();wn(this,"clear")}},ar.prototype.find=function(){return this.primary.find()},ar.prototype.getOptions=function(e){var t=this.primary.getOptions(e);return t.shared=!0,t};var Bi=e.LineWidget=function(e,t,r){for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.cm=e,this.node=t};Bi.prototype.clear=Tr(function(){var e=this.line.widgets,t=qr(this.line);if(null!=t&&e){for(var r=0;e.length>r;++r)e[r]==this&&e.splice(r--,1);e.length||(this.line.widgets=null),Zr(this.line,Math.max(0,this.line.height-Mr(this))),Q(this.cm,t,t+1)}}),Bi.prototype.changed=Tr(function(){var e=this.height;this.height=null;var t=Mr(this)-e;if(t){Zr(this.line,this.line.height+t);var r=qr(this.line);Q(this.cm,r,r+1)}});var Fi={},Ri=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g;Ur.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r=e,n=e+t;n>r;++r){var i=this.lines[r];this.height-=i.height,Dr(i),wn(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertInner:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0,i=t.length;i>n;++n)t[n].parent=this},iterN:function(e,t,r){for(var n=e+t;n>e;++e)if(r(this.lines[e]))return!0}},Gr.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var r=0;this.children.length>r;++r){var n=this.children[r],i=n.chunkSize();if(i>e){var o=Math.min(t,i-e),l=n.height;if(n.removeInner(e,o),this.height-=l-n.height,i==o&&(this.children.splice(r--,1),n.parent=null),0==(t-=o))break;e=0}else e-=i}if(25>this.size-t){var s=[];this.collapse(s),this.children=[new Ur(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0,r=this.children.length;r>t;++t)this.children[t].collapse(e)},insertInner:function(e,t,r){this.size+=t.length,this.height+=r;for(var n=0,i=this.children.length;i>n;++n){var o=this.children[n],l=o.chunkSize();if(l>=e){if(o.insertInner(e,t,r),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var s=o.lines.splice(o.lines.length-25,25),a=new Ur(s);o.height-=a.height,this.children.splice(n+1,0,a),a.parent=this}this.maybeSpill()}break}e-=l}},maybeSpill:function(){if(!(10>=this.children.length)){var e=this;do{var t=e.children.splice(e.children.length-5,5),r=new Gr(t);if(e.parent){e.size-=r.size,e.height-=r.height;var n=Dn(e.parent.children,e);e.parent.children.splice(n+1,0,r)}else{var i=new Gr(e.children);i.parent=e,e.children=[i,r],e=i}r.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,r){for(var n=0,i=this.children.length;i>n;++n){var o=this.children[n],l=o.chunkSize();if(l>e){var s=Math.min(t,l-e);if(o.iterN(e,s,r))return!0;if(0==(t-=s))break;e=0}else e-=l}}};var Pi=0,Vi=e.Doc=function Vi(e,t,r){if(!(this instanceof Vi))return new Vi(e,t,r);null==r&&(r=0),Gr.call(this,[new Ur([zr("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=rn(),this.frontier=r;var n={line:r,ch:0};this.sel={from:n,to:n,head:n,anchor:n,shift:!1,extend:!1,goalColumn:null},this.id=++Pi,this.modeOption=t,"string"==typeof e&&(e=to(e)),Kr(this,{from:n,to:n,text:e},null,{head:n,anchor:n})};Vi.prototype=An(Gr.prototype,{iter:function(e,t,r){r?this.iterN(e-this.first,t-(e-this.first),r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var r=0,n=0,i=t.length;i>n;++n)r+=t[n].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=$r(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:function(e){var t={line:this.first,ch:0},r=this.first+this.size-1;Mt(this,{from:t,to:{line:r,ch:_r(this,r).text.length},text:to(e),origin:"setValue"},{head:t,anchor:t},!0)},replaceRange:function(e,t,r){t=Ft(this,t),r=r?Ft(this,r):t,Wt(this,e,t,r)},getRange:function(e,t,r){var n=jr(this,Ft(this,e),Ft(this,t));return r===!1?n:n.join(r||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},setLine:function(e,t){Rt(this,e)&&Wt(this,t,{line:e,ch:0},{line:e,ch:_r(this,e).text.length})},removeLine:function(e){Rt(this,e)&&Wt(this,"",{line:e,ch:0},Ft(this,{line:e+1,ch:0}))},getLineHandle:function(e){return Rt(this,e)?_r(this,e):void 0},getLineNumber:function(e){return qr(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Ft(this,e)},getCursor:function(e){var t,r=this.sel;return t=null==e||"head"==e?r.head:"anchor"==e?r.anchor:"end"==e||e===!1?r.to:r.from,It(t)},somethingSelected:function(){return!Ht(this.sel.head,this.sel.anchor)},setCursor:q(function(e,t,r){var n=Ft(this,"number"==typeof e?{line:e,ch:t||0}:e);r?Pt(this,n):Vt(this,n,n)}),setSelection:q(function(e,t){Vt(this,Ft(this,e),Ft(this,t||e))}),extendSelection:q(function(e,t){Pt(this,Ft(this,e),t&&Ft(this,t))}),getSelection:function(e){return this.getRange(this.sel.from,this.sel.to,e)},replaceSelection:function(e,t,r){Mt(this,{from:this.sel.from,to:this.sel.to,text:to(e),origin:r},t||"around")},undo:function(){zt(this,"undo")},redo:function(){zt(this,"redo")},setExtending:function(e){this.sel.extend=e},historySize:function(){var e=this.history;return{undo:e.done.length,redo:e.undone.length}},clearHistory:function(){this.history=rn()},markClean:function(){this.history.dirtyCounter=0,this.history.lastOp=this.history.lastOrigin=null},isClean:function(){return 0==this.history.dirtyCounter},getHistory:function(){return{done:un(this.history.done),undone:un(this.history.undone)}},setHistory:function(e){var t=this.history=rn();t.done=e.done.slice(0),t.undone=e.undone.slice(0)},markText:function(e,t,r){return sr(this,Ft(this,e),Ft(this,t),r,"range")},setBookmark:function(e,t){return e=Ft(this,e),sr(this,e,e,t?{replacedWith:t}:{},"bookmark")},findMarksAt:function(e){e=Ft(this,e);var t=[],r=_r(this,e.line).markedSpans;if(r)for(var n=0;r.length>n;++n){var i=r[n];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},posFromIndex:function(e){var t,r=this.first;return this.iter(function(n){var i=n.text.length+1;return i>e?(t=e,!0):(e-=i,++r,void 0)}),Ft(this,{line:r,ch:t})},indexFromPos:function(e){e=Ft(this,e);var t=e.ch;return e.line<this.first||0>e.ch?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new Vi($r(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,r=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&r>e.to&&(r=e.to);var n=new Vi($r(this,t,r),e.mode||this.modeOption,t);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],n},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var r=0;this.linked.length>r;++r){var n=this.linked[r];if(n.doc==t){this.linked.splice(r,1),t.unlinkDoc(this);break}}if(t.history==this.history){var i=[t.id];Xr(t,function(e){i.push(e.id)},!0),t.history=rn(),t.history.done=un(this.history.done,i),t.history.undone=un(this.history.undone,i)}},iterLinkedDocs:function(e){Xr(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});for(var Ki="setValue getValue getSelection replaceSelection undo redo historySize clearHistory markClean isClean getHistory setHistory markText setBookmark findMarksAt lineCount firstLine lastLine clipPos getCursor somethingSelected setCursor setSelection extendSelection setExtending getLine setLine removeLine getMode replaceRange getRange getLineHandle getLineNumber posFromIndex indexFromPos linkedDoc unlinkDoc iterLinkedDocs".split(" "),Ui=0;Ki.length>Ui;++Ui)(function(t){var r=Vi.prototype[t];e.prototype[t]=function(){return r.apply(this.doc,arguments)}})(Ki[Ui]);e.e_stop=gn,e.e_preventDefault=mn,e.e_stopPropagation=vn;var Gi,Xi=0;e.on=xn,e.off=Cn,e.signal=Ln;var Yi=30,_i=e.Pass={toString:function(){return"CodeMirror.Pass"}};Tn.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}},e.countColumn=Mn;var ji=[""],$i=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,Zi=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F]/,qi=function(){if(ri)return!1;var e=Fn("div");return"draggable"in e||"dragDrop"in e}(),Ji=/^$/;Qn?Ji=/$'/:si?Ji=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:oi&&(Ji=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);var Qi,eo,to=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,r=[],n=e.length;n>=t;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),l=o.indexOf("\r");-1!=l?(r.push(o.slice(0,l)),t+=l+1):(r.push(o),t=i+1)}return r}:function(e){return e.split(/\r\n?|\n/)};e.splitLines=to;var ro=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(r){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1},no=function(){var e=Fn("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),io={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};e.keyNames=io,function(){for(var e=0;10>e;e++)io[e+48]=e+"";for(var e=65;90>=e;e++)io[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)io[e+111]=io[e+63235]="F"+e}();var oo=function(){function e(e){return 255>=e?t.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1791>=e?r.charAt(e-1536):e>=1792&&2220>=e?"r":"L"}var t="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",r="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,o=/[LRr]/,l=/[Lb1n]/,s=/[1n]/,a="L";return function(t){if(!n.test(t))return!1;for(var r,u=t.length,c=[],h=0;u>h;++h)c.push(r=e(t.charCodeAt(h)));for(var h=0,f=a;u>h;++h){var r=c[h];"m"==r?c[h]=f:f=r}for(var h=0,d=a;u>h;++h){var r=c[h];"1"==r&&"r"==d?c[h]="n":o.test(r)&&(d=r,"r"==r&&(c[h]="R"))}for(var h=1,f=c[0];u-1>h;++h){var r=c[h];"+"==r&&"1"==f&&"1"==c[h+1]?c[h]="1":","!=r||f!=c[h+1]||"1"!=f&&"n"!=f||(c[h]=f),f=r}for(var h=0;u>h;++h){var r=c[h];if(","==r)c[h]="N";else if("%"==r){for(var p=h+1;u>p&&"%"==c[p];++p);for(var m=h&&"!"==c[h-1]||u-1>p&&"1"==c[p]?"1":"N",v=h;p>v;++v)c[v]=m;h=p-1}}for(var h=0,d=a;u>h;++h){var r=c[h];"L"==d&&"1"==r?c[h]="L":o.test(r)&&(d=r)}for(var h=0;u>h;++h)if(i.test(c[h])){for(var p=h+1;u>p&&i.test(c[p]);++p);for(var g="L"==(h?c[h-1]:a),y="L"==(u-1>p?c[p]:a),m=g||y?"L":"R",v=h;p>v;++v)c[v]=m;h=p-1}for(var b,k=[],h=0;u>h;)if(l.test(c[h])){var x=h;for(++h;u>h&&l.test(c[h]);++h);k.push({from:x,to:h,level:0})}else{var C=h,L=k.length;for(++h;u>h&&"L"!=c[h];++h);for(var v=C;h>v;)if(s.test(c[v])){v>C&&k.splice(L,0,{from:C,to:v,level:1});var w=v;for(++v;h>v&&s.test(c[v]);++v);k.splice(L,0,{from:w,to:v,level:2}),C=v}else++v;h>C&&k.splice(L,0,{from:C,to:h,level:1})}return 1==k[0].level&&(b=t.match(/^\s+/))&&(k[0].from=b[0].length,k.unshift({from:0,to:b[0].length,level:0})),1==zn(k).level&&(b=t.match(/\s+$/))&&(zn(k).to-=b[0].length,k.push({from:u-b[0].length,to:u,level:0})),k[0].level!=zn(k).level&&k.push({from:u,to:u,level:k[0].level}),k}}();return e.version="3.02 +",e}(),CodeMirror.defineMode("css",function(){function e(e,r){var n=t(e,r);return void 0!==n?n:e.eat("}")?(r.tokenize.length>1&&r.tokenize.pop(),null):e.match(/^@media/i)?(r.tokenize.push(v),"at-rule"):e.match(/^@import/i)?(r.tokenize.push(k),"at-rule"):e.match(/^@[-\w]*keyframes/i)?(r.tokenize.push(m),"at-rule"):e.match(/^@[-\w]+/)?(r.tokenize.push(C),"at-rule"):e.match(/^\*?[-\w{}$]*: /,!1)?(r.tokenize.push(L),L(e,r)):(r.tokenize.push(w),w(e,r))}function t(e,t){return e.eatSpace()?null:r(e,t)}function r(e,t){return e.match("//")?(e.skipToEnd(),"comment"):e.match(/\/\*/)?(t.tokenize.push(n),"comment"):void 0}function n(e,t){return e.match(/^[\s\S]*?\*\//)?(t.tokenize.pop(),"comment"):(e.skipToEnd(),"comment")}function i(e,r){var n=t(e,r);return void 0!==n?n:e.eat(";")||"}"===e.peek()?(r.tokenize.pop(),null):o(e,r)}function o(e,t){return r(e,t)||l(e,t)||s(e,t)||a(e,t)||u(e,t)||c(e,t)||f(e,t)||p(e,t)}function l(e){return e.match(/^'(?:[^'\\]|\\.)*'/)?"string":e.match(/^"(?:[^"\\]|\\.)*"/)?"string":void 0}function s(e){return e.match(/^[-+]?(?:\d?\.\d+|\d+)(?:\w+|%)?/)?"value":void 0}function a(e){return e.eat("/")?"operator":void 0}function u(e){return e.match(/^#\w+/)?"value":void 0}function c(e,t){return e.match(/^url\(/i)?(e.backUp(1),t.tokenize.push(h),"operator"):void 0}function h(e,t){if(e.eat("("))return null;if(e.eat(")"))return t.tokenize.pop(),null;var r=l(e,t);return void 0!==r?r:e.match(/^[^)]+/)?"string":void 0}function f(e,t){var r=p(e,t);return void 0!==r&&"("===e.peek()?("value"===r&&(r="operator"),t.tokenize.push(d),r):(e.backUp(e.current().length),void 0)}function d(e,t){return e.eat("(")?null:e.eat(")")?(t.tokenize.pop(),null):o(e,t)}function p(e){return e.match(/^[-\w]+/)?"value":void 0}function m(r,n){var i=t(r,n);return void 0!==i?i:r.eat("{")?(n.tokenize.pop(),n.tokenize.push(e),null):o(r,n)}function v(r,n){var i=t(r,n);return void 0!==i?i:r.eat("{")?(n.tokenize.pop(),n.tokenize.push(e),null):g(r,n)}function g(e,t){if(e.eat("("))return t.tokenize.push(y),"selector";
var r=p(e,t);return"value"===r?"selector":r}function y(e,r){var n=t(e,r);if(void 0!==n)return n;var n=p(e,r);return void 0!==n?"value"===n?"selector":n:e.eat(":")?(r.tokenize.pop(),r.tokenize.push(b),"selector"):void 0}function b(e,r){var n=t(e,r);return void 0!==n?n:e.eat(")")?(r.tokenize.pop(),"selector"):o(e,r)}function k(e,r){var n=t(e,r);return void 0!==n?n:r.importValueLexed?(r.importValueLexed=!1,e.eat(";")?(r.tokenize.pop(),null):(r.tokenize.pop(),r.tokenize.push(x),x(e,r))):(r.importValueLexed=!0,o(e,r))}function x(r,n){var i=t(r,n);return void 0!==i?i:r.eat(";")||"}"===r.peek()?(n.tokenize.pop(),n.tokenize.push(e),null):g(r,n)}function C(r,n){var i=t(r,n);return void 0!==i?i:r.eat("{")?(n.tokenize.pop(),n.tokenize.push(e),null):void 0}function L(e,t){if(e.eat(":"))return t.tokenize.pop(),t.tokenize.push(i),null;if(e.eat("*"))return"property";var r=p(e,t);return"value"===r?"property":r}function w(r,n){var i=t(r,n);return void 0!==i?i:r.eat("{")?(n.tokenize.pop(),n.tokenize.push(e),null):S(r,n)}function S(e,t){return e.eat("&")?"operator":e.eat(/[>+~*]/)?"selector":e.eat(/[#.]/)?T(e,t):e.eat("[")?(t.tokenize.push(M),"selector"):e.match(/^::?/)?z(e,t):T(e,t)}function T(e,t){var r=p(e,t);return"value"===r?"selector":r}function M(e,r){var n=t(e,r);if(void 0!==n)return n;if(e.eat("="))return r.tokenize.pop(),r.tokenize.push(E),"selector";var n=p(e,r);return void 0!==n?"value"===n?"selector":n:void 0}function E(e,r){var n=t(e,r);return void 0!==n?n:e.eat("]")?(r.tokenize.pop(),"selector"):o(e,r)}function z(e,t){var r=p(e,t);return void 0!==r?("value"===r&&(r="selector"),e.eat("(")&&t.tokenize.push(z),r):void 0}return{startState:function(){return{tokenize:[e]}},token:function(e,t){var r=t.tokenize[t.tokenize.length-1],n=r(e,t);return void 0===n&&e.next(),n}}}),CodeMirror.defineMode("roole",function(){function e(e,r){var n=t(e,r);if(void 0!==n)return n;if(e.eat("}"))return r.tokenize.length>1&&r.tokenize.pop(),null;var n=i(e,r);if(void 0!==n)return n;var n=u(e,r);return void 0!==n?n:e.match(/^@(?:else\s+if|if)/i)?(r.tokenize.push(S),"at-rule"):e.match(/^@for/i)?(r.tokenize.push(T),"at-rule"):e.match(/^@media/i)?(r.tokenize.push(E),"at-rule"):e.match(/^@import/i)?(r.tokenize.push(A),"at-rule"):e.match(/^@[-\w]*keyframes/i)?(r.tokenize.push(S),"at-rule"):e.match(/^@extend(?:-all)?/i)?(r.tokenize.push(B),"at-rule"):e.match(/^@[-\w]+/)?(r.tokenize.push(H),"at-rule"):e.match(/^\*?[-\w{}$]*: /,!1)?(r.tokenize.push(O),O(e,r)):(r.tokenize.push(I),I(e,r))}function t(e,t){return e.eatSpace()?null:r(e,t)}function r(e,t){return e.match("//")?(e.skipToEnd(),"comment"):e.match(/\/\*/)?(t.tokenize.push(n),"comment"):void 0}function n(e,t){return e.match(/^[\s\S]*?\*\//)?(t.tokenize.pop(),"comment"):(e.skipToEnd(),"comment")}function i(e,t){var r=o(e,t);return r&&e.match(/^\s*\??=/,!1)?(t.tokenize.push(l),r):(e.backUp(e.current().length),void 0)}function o(e){return e.match(/^\$[-\w]+/)?"variable":void 0}function l(e,t){return e.eatSpace()?null:e.match(/^\??=/)?"operator":(t.tokenize.pop(),t.tokenize.push(s),s(e,t))}function s(e,r){var n=t(e,r);return void 0!==n?n:e.eat(";")||"}"===e.peek()?(r.tokenize.pop(),null):a(e,r)}function a(e,t){return u(e,t)||f(e,t)||r(e,t)||d(e,t)||y(e,t)||g(e,t)||b(e,t)||k(e,t)||C(e,t)||w(e,t)}function u(e,t){var r=o(e,t);return void 0!==r&&"("===e.peek()?(t.tokenize.push(c),r):(e.backUp(e.current().length),void 0)}function c(e,t){return e.eat("(")?(t.tokenize.pop(),t.tokenize.push(h),null):void 0}function h(e,r){var n=t(e,r);return void 0!==n?n:e.eat(")")?(r.tokenize.pop(),null):a(e,r)}function f(e,t){return e.match(/^@mixin/i)?(t.tokenize.push(S),"at-rule"):void 0}function d(e,t){return e.match(/^'(?:[^'\\]|\\.)*'/)?"string":e.eat('"')?(t.tokenize.push(p),p(e,t)):void 0}function p(e,t){var r=o(e,t)||m(e,t);return void 0!==r?r:e.eat("{")?"string":e.match(/^(?:[^\\"{$]+|\\.)/)?"string":e.eat('"')?(t.tokenize.pop(),"string"):void 0}function m(e,t){return e.match(/^{\s*\$[-\w]+\s*}/,!1)?(e.next(),t.tokenize.push(v),null):void 0}function v(e,r){var n=t(e,r);return void 0!==n?n:e.eat("}")?(r.tokenize.pop(),null):o(e,r)}function g(e){return e.match(/^(?:[-+*\/()]|\.\.\.?|<=|<|>=|>|=|and|or|isnt|is)/i)?"operator":void 0}function y(e){return e.match(/^[-+]?(?:\d?\.\d+|\d+)(?:\w+|%)?/)?"value":void 0}function b(e){return e.match(/^#\w+/)?"value":void 0}function k(e,t){return e.match(/^url\(/i)?(e.backUp(1),t.tokenize.push(x),"operator"):void 0}function x(e,t){if(e.eat("("))return null;if(e.eat(")"))return t.tokenize.pop(),null;var r=d(e,t);return void 0!==r?r:e.match(/^[^)]+/)?"string":void 0}function C(e,t){var r=w(e,t);return void 0!==r&&"("===e.peek()?("value"===r&&(r="operator"),t.tokenize.push(L),r):(e.backUp(e.current().length),void 0)}function L(e,t){return e.eat("(")?null:e.eat(")")?(t.tokenize.pop(),null):a(e,t)}function w(e,t){var r=o(e,t)||m(e,t);return void 0!==r?r:e.match(/^[-\w]+/)?"value":void 0}function S(r,n){var i=t(r,n);return void 0!==i?i:r.eat("{")?(n.tokenize.pop(),n.tokenize.push(e),null):a(r,n)}function T(e,r){var n=t(e,r);if(void 0!==n)return n;if(e.eat(","))return null;var n=o(e,r);return n?n:e.match(/^by/i)?(r.tokenize.pop(),r.tokenize.push(M),"at-rule"):e.match(/^in/i)?(r.tokenize.pop(),r.tokenize.push(S),"at-rule"):void 0}function M(e,r){var n=t(e,r);return void 0!==n?n:e.match(/^in/i)?(r.tokenize.pop(),r.tokenize.push(S),"at-rule"):a(e,r)}function E(r,n){var i=t(r,n);return void 0!==i?i:r.eat("{")?(n.tokenize.pop(),n.tokenize.push(e),null):z(r,n)}function z(e,t){if(e.eat("("))return t.tokenize.push(N),"selector";var r=w(e,t);return"value"===r?"selector":r}function N(e,r){var n=t(e,r);if(void 0!==n)return n;var n=w(e,r);return void 0!==n?"value"===n?"selector":n:e.eat(":")?(r.tokenize.pop(),r.tokenize.push(D),"selector"):void 0}function D(e,r){var n=t(e,r);return void 0!==n?n:e.eat(")")?(r.tokenize.pop(),"selector"):a(e,r)}function A(e,r){var n=t(e,r);return void 0!==n?n:r.importValueLexed?(r.importValueLexed=!1,e.eat(";")?(r.tokenize.pop(),null):(r.tokenize.pop(),r.tokenize.push(W),W(e,r))):(r.importValueLexed=!0,a(e,r))}function W(r,n){var i=t(r,n);return void 0!==i?i:r.eat(";")||"}"===r.peek()?(n.tokenize.pop(),n.tokenize.push(e),null):z(r,n)}function H(r,n){var i=t(r,n);return void 0!==i?i:r.eat("{")?(n.tokenize.pop(),n.tokenize.push(e),null):void 0}function O(e,t){if(e.eat(":"))return t.tokenize.pop(),t.tokenize.push(s),null;if(e.eat("*"))return"property";var r=w(e,t);return"value"===r?"property":r}function I(r,n){var i=t(r,n);return void 0!==i?i:r.eat("{")?(n.tokenize.pop(),n.tokenize.push(e),null):F(r,n)}function B(e,r){var n=t(e,r);return void 0!==n?n:e.eat(";")?(r.tokenize.pop(),null):F(e,r)}function F(e,t){return e.eat("&")?"operator":e.eat(/[>+~*]/)?"selector":e.eat(/[#.]/)?R(e,t):e.eat("[")?(t.tokenize.push(P),"selector"):e.match(/^::?/)?K(e,t):R(e,t)}function R(e,t){var r=w(e,t);return"value"===r?"selector":r}function P(e,r){var n=t(e,r);if(void 0!==n)return n;if(e.eat("="))return r.tokenize.pop(),r.tokenize.push(V),"selector";var n=w(e,r);return void 0!==n?"value"===n?"selector":n:void 0}function V(e,r){var n=t(e,r);return void 0!==n?n:e.eat("]")?(r.tokenize.pop(),"selector"):a(e,r)}function K(e,t){var r=w(e,t);return void 0!==r?("value"===r&&(r="selector"),e.eat("(")&&t.tokenize.push(K),r):void 0}return{startState:function(){return{tokenize:[e]}},token:function(e,t){var r=t.tokenize[t.tokenize.length-1],n=r(e,t);return void 0===n&&e.next(),n}}}),Toc.prototype.clickToToggle=function(){this.toggerElement.addEventListener("mousedown",function(){this.element.classList.contains("hidden")?(this.element.classList.remove("hidden"),setTimeout(this.clickDocumentToHide.bind(this),0)):(this.noClickDocumentToHide(),this.element.classList.add("hidden"))}.bind(this),!1),this.toggerElement.addEventListener("click",function(e){e.preventDefault()},!1)},Toc.prototype.clickDocumentToHide=function(){this.clickDocumentHandler=function(){this.element.classList.add("hidden"),this.noClickDocumentToHide()}.bind(this),document.addEventListener("mousedown",this.clickDocumentHandler,!1)},Toc.prototype.noClickDocumentToHide=function(){document.removeEventListener("mousedown",this.clickDocumentHandler,!1)},document.addEventListener("DOMContentLoaded",function(){new Toc});var Editor=function(){var e=document.getElementById("editor"),t=e.getElementsByClassName("content")[0],r=e.getElementsByClassName("resizer")[0],n=e.getElementsByClassName("input")[0],i=n.getElementsByTagName("textarea")[0],o=e.getElementsByClassName("output")[0],l=o.getElementsByClassName("error")[0],s=l.getElementsByClassName("content")[0],a=l.getElementsByClassName("arrow")[0],u=document.querySelector('#nav a[href="#editor"]');l.parentNode.removeChild(l),l.classList.remove("hidden"),this.element=e,this.contentElement=t,this.resizerElement=r,this.inputElement=n,this.textareaElement=i,this.outputElement=o,this.errorElement=l,this.errorContentElement=s,this.errorArrowElement=a,this.togglerElement=u,this.inputEditor=this.createInputEditor(),this.outputEditor=this.createOutputEditor(),this.dragToResize(),this.typeToCompile(),this.clickToToggle(),this.lockScroll(),this.compileInput(),this.hide(),setTimeout(function(){e.classList.remove("hidden")},0)};Editor.prototype.dragToResize=function(){this.resizerElement.addEventListener("mousedown",function(e){e.preventDefault();var t=e.pageY,r=this.getContentHeight(),n=function(e){var n=e.pageY,i=n-t;this.setContentHeight(r+i)}.bind(this);document.addEventListener("mousemove",n,!1),document.addEventListener("mouseup",function(){document.removeEventListener("mousemove",n,!1)},!1)}.bind(this),!1)},Editor.prototype.getContentHeight=function(){var e=getComputedStyle(this.contentElement);return parseInt(e.height,10)},Editor.prototype.setContentHeight=function(e){0>e&&(e=0),this.contentElement.style.height=e+"px"},Editor.prototype.typeToCompile=function(){var e;this.inputEditor.on("change",function(){clearTimeout(e),e=setTimeout(this.compileInput.bind(this),400)}.bind(this))},Editor.prototype.compileInput=function(){var e=this.inputEditor.getValue();this.hideError(),roole.compile(e,function(e,t){e?this.showError(e):this.outputEditor.setValue(t)}.bind(this))},Editor.prototype.createInputEditor=function(){var e=CodeMirror.fromTextArea(this.textareaElement,{mode:"roole",theme:"tomorrow",tabSize:2,autofocus:!0,dragDrop:!1,lineNumbers:!0,extraKeys:{Tab:function(e){var t=Array(e.getOption("indentUnit")+1).join(" ");e.replaceSelection(t,"end","+input")}}});return e.getWrapperElement().classList.add("lang-roole"),e},Editor.prototype.createOutputEditor=function(){var e=CodeMirror(this.outputElement,{mode:"css",theme:"tomorrow",tabSize:2,readOnly:"nocursor",lineNumbers:!0});return e.getWrapperElement().classList.add("lang-css"),e},Editor.prototype.hideError=function(){this.hasError&&(this.hasError=!1,this.outputEditor.removeLineWidget(this.lineWidget),this.outputElement.classList.remove("error"),this.outputEditor.getWrapperElement().classList.remove("lang-roole"),this.outputEditor.getWrapperElement().classList.add("lang-css"))},Editor.prototype.showError=function(e){this.hasError=!0,this.outputElement.classList.add("error"),this.outputEditor.getWrapperElement().classList.remove("lang-css"),this.outputEditor.getWrapperElement().classList.add("lang-roole"),this.outputEditor.setValue(this.inputEditor.getValue());var t={line:e.line-1,ch:e.column-1},r=this.outputEditor.cursorCoords(t,"local");this.errorContentElement.textContent=e.message,this.errorArrowElement.style.left=r.left+"px",this.clickErrorElementToMoveCursor(t),this.lineWidget=this.outputEditor.addLineWidget(t.line,this.errorElement);var n=this.errorElement.parentNode.parentNode;this.outputEditor.scrollIntoView({top:n.offsetTop,left:n.offsetLeft,bottom:n.offsetTop+n.offsetHeight,right:n.offsetLeft+n.offsetWidth})},Editor.prototype.clickErrorElementToMoveCursor=function(e){var t=this.inputEditor;this.errorElement.onclick=function(){t.focus(),t.setCursor(e)}},Editor.prototype.clickToToggle=function(){this.togglerElement.addEventListener("click",function(e){e.preventDefault(),this.toggle()}.bind(this),!1)},Editor.prototype.toggle=function(){this.visible?this.hide():this.show(),this.visible=!this.visible},Editor.prototype.hide=function(){var e=this.getHeight();this.element.style.top=-e+"px"},Editor.prototype.show=function(){this.element.style.removeProperty("top")},Editor.prototype.getHeight=function(){var e=getComputedStyle(this.element);return parseInt(e.height,10)},Editor.prototype.lockScroll=function(){for(var e=this.element.getElementsByClassName("CodeMirror-scroll"),t=function(e){var t,r=this.scrollTop,n=this.scrollHeight,i=this.offsetHeight;t="wheel"===e.type?0>e.deltaY:0>-e.wheelDelta,(t&&0===r||!t&&r===n-i)&&e.preventDefault()},r=0,n=e.length;n>r;++r){var i=e[r],o="onwheel"in document?"wheel":"mousewheel";i.addEventListener(o,t,!1)}},document.addEventListener("DOMContentLoaded",function(){new Editor});